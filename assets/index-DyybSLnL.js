import{R as Aa,j as t,r as s,P as St,D as Ot,X as Rt,M as Ma,G as Na,a as Zt,T as Qt,Z as ya,b as wa,c as Ba,L as Da,d as Sa,e as Ea,f as ja,S as Ra,g as ka}from"./vendor-react-SqKm7p-h.js";import{h as sa}from"./vendor-html2canvas-5Cw11iw4.js";import"./vendor-vHUq6zmN.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))f(c);new MutationObserver(c=>{for(const g of c)if(g.type==="childList")for(const B of g.addedNodes)B.tagName==="LINK"&&B.rel==="modulepreload"&&f(B)}).observe(document,{childList:!0,subtree:!0});function o(c){const g={};return c.integrity&&(g.integrity=c.integrity),c.referrerPolicy&&(g.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?g.credentials="include":c.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function f(c){if(c.ep)return;c.ep=!0;const g=o(c);fetch(c.href,g)}})();const Pa=a=>a instanceof Error?a.message+`
`+a.stack:JSON.stringify(a,null,2);class Ia extends Aa.Component{constructor(n){super(n),this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}render(){return this.state.hasError?t.jsxs("div",{className:"p-4 border border-red-500 rounded","data-matrix-id":"src/components/ErrorBoundary.tsx:26:8","data-matrix-name":"div","data-component-path":"src/components/ErrorBoundary.tsx","data-component-line":"26","data-component-file":"ErrorBoundary.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-4%20border%20border-red-500%20rounded%22%7D",children:[t.jsx("h2",{className:"text-red-500","data-matrix-id":"src/components/ErrorBoundary.tsx:27:10","data-matrix-name":"h2","data-component-path":"src/components/ErrorBoundary.tsx","data-component-line":"27","data-component-file":"ErrorBoundary.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-red-500%22%7D",children:"Something went wrong."}),t.jsx("pre",{className:"mt-2 text-sm","data-matrix-id":"src/components/ErrorBoundary.tsx:28:10","data-matrix-name":"pre","data-component-path":"src/components/ErrorBoundary.tsx","data-component-line":"28","data-component-file":"ErrorBoundary.tsx","data-component-name":"pre","data-component-content":"%7B%22className%22%3A%22mt-2%20text-sm%22%7D",children:Pa(this.state.error)})]}):this.props.children}}const zt="meal_map_students",Jt="meal_map_version",Kt="3.0",ra="meal_map_region_colors",ca="meal_map_style_settings",xt=[{name:"天空蓝",value:"sky",hex:"#0EA5E9",bg:"bg-sky-500/75",border:"border-sky-600",text:"text-white"},{name:"翠绿",value:"emerald",hex:"#10B981",bg:"bg-emerald-500/75",border:"border-emerald-600",text:"text-white"},{name:"紫罗兰",value:"purple",hex:"#A855F7",bg:"bg-purple-500/75",border:"border-purple-600",text:"text-white"},{name:"橙色",value:"orange",hex:"#F97316",bg:"bg-orange-500/75",border:"border-orange-600",text:"text-white"},{name:"玫红",value:"rose",hex:"#F43F5E",bg:"bg-rose-500/75",border:"border-rose-600",text:"text-white"},{name:"青色",value:"cyan",hex:"#06B6D4",bg:"bg-cyan-500/75",border:"border-cyan-600",text:"text-white"}],La=()=>`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,$t={emptyRegionColor:"#cccccc",canvasBackgroundColor:"#f0ebe6"},Wt=()=>{try{const a=localStorage.getItem(ra);return a?JSON.parse(a):{}}catch(a){return console.error("Failed to load region colors:",a),{}}},ia=a=>{try{localStorage.setItem(ra,JSON.stringify(a))}catch(n){console.error("Failed to save region colors:",n)}},Fa=(a,n)=>{const o=Wt();o[a]=n,ia(o)},Ta=a=>Wt()[a]||null,_a=a=>{const n=Wt();delete n[a],ia(n)},$a=()=>Wt(),Oa="#cccccc",da=()=>{try{const a=localStorage.getItem(ca);if(!a)return $t;const n=JSON.parse(a),o={...$t,...n};return o.emptyRegionColor===Oa&&(o.emptyRegionColor=$t.emptyRegionColor),o}catch(a){return console.error("Failed to load style settings:",a),$t}},jt=()=>da(),oa=a=>{const o={...da(),...a};try{localStorage.setItem(ca,JSON.stringify(o))}catch(f){console.error("Failed to save style settings:",f)}return o},Et=a=>{const n=Ta(a);if(n){const c=xt.find(g=>g.value===n);return c?c.hex:n}let o=0;for(let c=0;c<a.length;c++)o=(o<<5)-o+a.charCodeAt(c),o=o&o;const f=Math.abs(o)%xt.length;return xt[f].hex},Nt=a=>{let n=xt.find(o=>o.value===a);return!n&&a&&(n=xt.find(o=>o.hex.toLowerCase()===a.toLowerCase())),!n&&a?{name:"自定义",value:a,hex:a,bg:"",border:"",text:"text-white",isCustom:!0}:{...n||xt[0],isCustom:!1}},za=a=>a.city?{id:a.id,country:a.country,region_id:a.region_id,region_name:a.region_name,name:a.name,city:a.city,school:a.school,created_at:a.created_at,updated_at:a.updated_at}:{id:a.id,country:a.country,region_id:a.region_id,region_name:a.region_name,name:a.name,city:a.region_name,school:a.school,created_at:a.created_at,updated_at:a.updated_at},Wa=()=>{try{if(localStorage.getItem(Jt)===Kt)return;const n=localStorage.getItem(zt);if(!n){localStorage.setItem(Jt,Kt);return}const f=JSON.parse(n).map(za);localStorage.setItem(zt,JSON.stringify(f)),localStorage.setItem(Jt,Kt)}catch(a){console.error("Migration failed:",a)}},Yt=()=>{try{Wa();const a=localStorage.getItem(zt);return a?JSON.parse(a):[]}catch(a){return console.error("Failed to load students from localStorage:",a),[]}},aa=a=>{try{localStorage.setItem(zt,JSON.stringify(a))}catch(n){console.error("Failed to save students to localStorage:",n)}},Ya=a=>{const n=Yt(),o=new Date().toISOString(),f={id:La(),country:a.country,region_id:a.region_id,region_name:a.region_name,name:a.name,city:a.city,created_at:o,updated_at:o};return n.unshift(f),aa(n),f},Ha=(a,n)=>{const o=Yt(),f=o.findIndex(g=>g.id===a);if(f===-1)return null;const c={...o[f],...n,color:void 0,updated_at:new Date().toISOString()};return o[f]=c,aa(o),c},Xa=a=>{const n=Yt(),o=n.filter(f=>f.id!==a);return o.length===n.length?!1:(aa(o),!0)};function qa({selectedCountry:a,onCountryChange:n,studentCount:o,onExport:f,onColorManager:c}){const[g,B]=s.useState(!1);return t.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-sticky bg-white shadow-sm","data-matrix-id":"src/components/Navigation.tsx:22:4","data-matrix-name":"nav","data-component-path":"src/components/Navigation.tsx","data-component-line":"22","data-component-file":"Navigation.tsx","data-component-name":"nav","data-component-content":"%7B%22className%22%3A%22fixed%20top-0%20left-0%20right-0%20z-sticky%20bg-white%20shadow-sm%22%7D",children:[t.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-16 md:h-18 flex items-center justify-between","data-matrix-id":"src/components/Navigation.tsx:23:6","data-matrix-name":"div","data-component-path":"src/components/Navigation.tsx","data-component-line":"23","data-component-file":"Navigation.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-w-7xl%20mx-auto%20px-6%20h-16%20md%3Ah-18%20flex%20items-center%20justify-between%22%7D",children:[t.jsx("div",{className:"flex items-center","data-matrix-id":"src/components/Navigation.tsx:25:8","data-matrix-name":"div","data-component-path":"src/components/Navigation.tsx","data-component-line":"25","data-component-file":"Navigation.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%22%7D",children:t.jsx("h1",{className:"text-h3 font-semibold text-neutral-900","data-matrix-id":"src/components/Navigation.tsx:26:10","data-matrix-name":"h1","data-component-path":"src/components/Navigation.tsx","data-component-line":"26","data-component-file":"Navigation.tsx","data-component-name":"h1","data-component-content":"%7B%22className%22%3A%22text-h3%20font-semibold%20text-neutral-900%22%7D",children:"蹭饭地图"})}),t.jsxs("div",{className:"hidden md:flex items-center gap-1 bg-neutral-100 rounded-md p-1","data-matrix-id":"src/components/Navigation.tsx:30:8","data-matrix-name":"div","data-component-path":"src/components/Navigation.tsx","data-component-line":"30","data-component-file":"Navigation.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22hidden%20md%3Aflex%20items-center%20gap-1%20bg-neutral-100%20rounded-md%20p-1%22%7D",children:[t.jsx("button",{onClick:()=>n("china"),className:`px-6 py-2 rounded-md text-body font-medium transition-all duration-base ${a==="china"?"bg-primary-500 text-white shadow-sm":"text-neutral-700 hover:text-neutral-900"}`,"data-matrix-id":"src/components/Navigation.tsx:31:10","data-matrix-name":"button","data-component-path":"src/components/Navigation.tsx","data-component-line":"31","data-component-file":"Navigation.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:"中国"}),t.jsx("button",{onClick:()=>n("usa"),className:`px-6 py-2 rounded-md text-body font-medium transition-all duration-base ${a==="usa"?"bg-primary-500 text-white shadow-sm":"text-neutral-700 hover:text-neutral-900"}`,"data-matrix-id":"src/components/Navigation.tsx:41:10","data-matrix-name":"button","data-component-path":"src/components/Navigation.tsx","data-component-line":"41","data-component-file":"Navigation.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:"美国"})]}),t.jsxs("div",{className:"hidden md:flex items-center gap-4","data-matrix-id":"src/components/Navigation.tsx:54:8","data-matrix-name":"div","data-component-path":"src/components/Navigation.tsx","data-component-line":"54","data-component-file":"Navigation.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22hidden%20md%3Aflex%20items-center%20gap-4%22%7D",children:[t.jsx("div",{className:"bg-neutral-100 px-4 py-2 rounded-full","data-matrix-id":"src/components/Navigation.tsx:56:10","data-matrix-name":"div","data-component-path":"src/components/Navigation.tsx","data-component-line":"56","data-component-file":"Navigation.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-neutral-100%20px-4%20py-2%20rounded-full%22%7D",children:t.jsxs("span",{className:"text-small text-neutral-700","data-matrix-id":"src/components/Navigation.tsx:57:12","data-matrix-name":"span","data-component-path":"src/components/Navigation.tsx","data-component-line":"57","data-component-file":"Navigation.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-small%20text-neutral-700%22%7D",children:["已添加 ",t.jsx("span",{className:"font-semibold text-neutral-900","data-matrix-id":"src/components/Navigation.tsx:58:18","data-matrix-name":"span","data-component-path":"src/components/Navigation.tsx","data-component-line":"58","data-component-file":"Navigation.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-semibold%20text-neutral-900%22%7D",children:o})," 位同学"]})}),t.jsxs("button",{onClick:c,className:"btn-secondary flex items-center gap-2","data-matrix-id":"src/components/Navigation.tsx:63:10","data-matrix-name":"button","data-component-path":"src/components/Navigation.tsx","data-component-line":"63","data-component-file":"Navigation.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22btn-secondary%20flex%20items-center%20gap-2%22%7D",children:[t.jsx(St,{className:"w-5 h-5","data-matrix-id":"src/components/Navigation.tsx:64:12","data-matrix-name":"Palette","data-component-path":"src/components/Navigation.tsx","data-component-line":"64","data-component-file":"Navigation.tsx","data-component-name":"Palette","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),t.jsx("span",{"data-matrix-id":"src/components/Navigation.tsx:65:12","data-matrix-name":"span","data-component-path":"src/components/Navigation.tsx","data-component-line":"65","data-component-file":"Navigation.tsx","data-component-name":"span",children:"颜色管理"})]}),t.jsxs("button",{onClick:f,className:"btn-primary flex items-center gap-2","data-matrix-id":"src/components/Navigation.tsx:69:10","data-matrix-name":"button","data-component-path":"src/components/Navigation.tsx","data-component-line":"69","data-component-file":"Navigation.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22btn-primary%20flex%20items-center%20gap-2%22%7D",children:[t.jsx(Ot,{className:"w-5 h-5","data-matrix-id":"src/components/Navigation.tsx:70:12","data-matrix-name":"Download","data-component-path":"src/components/Navigation.tsx","data-component-line":"70","data-component-file":"Navigation.tsx","data-component-name":"Download","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),t.jsx("span",{"data-matrix-id":"src/components/Navigation.tsx:71:12","data-matrix-name":"span","data-component-path":"src/components/Navigation.tsx","data-component-line":"71","data-component-file":"Navigation.tsx","data-component-name":"span",children:"导出当前"})]})]}),t.jsx("button",{onClick:()=>B(!g),className:"md:hidden btn-icon","data-matrix-id":"src/components/Navigation.tsx:76:8","data-matrix-name":"button","data-component-path":"src/components/Navigation.tsx","data-component-line":"76","data-component-file":"Navigation.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22md%3Ahidden%20btn-icon%22%7D",children:g?t.jsx(Rt,{className:"w-6 h-6","data-matrix-id":"src/components/Navigation.tsx:80:22","data-matrix-name":"X","data-component-path":"src/components/Navigation.tsx","data-component-line":"80","data-component-file":"Navigation.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%22%7D"}):t.jsx(Ma,{className:"w-6 h-6","data-matrix-id":"src/components/Navigation.tsx:80:50","data-matrix-name":"Menu","data-component-path":"src/components/Navigation.tsx","data-component-line":"80","data-component-file":"Navigation.tsx","data-component-name":"Menu","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%22%7D"})})]}),g&&t.jsxs("div",{className:"md:hidden border-t border-neutral-200 bg-white p-4 space-y-4","data-matrix-id":"src/components/Navigation.tsx:86:8","data-matrix-name":"div","data-component-path":"src/components/Navigation.tsx","data-component-line":"86","data-component-file":"Navigation.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22md%3Ahidden%20border-t%20border-neutral-200%20bg-white%20p-4%20space-y-4%22%7D",children:[t.jsxs("div",{className:"flex gap-2","data-matrix-id":"src/components/Navigation.tsx:88:10","data-matrix-name":"div","data-component-path":"src/components/Navigation.tsx","data-component-line":"88","data-component-file":"Navigation.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-2%22%7D",children:[t.jsx("button",{onClick:()=>{n("china"),B(!1)},className:`flex-1 py-3 rounded-md font-medium transition-all ${a==="china"?"bg-primary-500 text-white":"bg-neutral-100 text-neutral-700"}`,"data-matrix-id":"src/components/Navigation.tsx:89:12","data-matrix-name":"button","data-component-path":"src/components/Navigation.tsx","data-component-line":"89","data-component-file":"Navigation.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:"中国"}),t.jsx("button",{onClick:()=>{n("usa"),B(!1)},className:`flex-1 py-3 rounded-md font-medium transition-all ${a==="usa"?"bg-primary-500 text-white":"bg-neutral-100 text-neutral-700"}`,"data-matrix-id":"src/components/Navigation.tsx:102:12","data-matrix-name":"button","data-component-path":"src/components/Navigation.tsx","data-component-line":"102","data-component-file":"Navigation.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:"美国"})]}),t.jsx("div",{className:"bg-neutral-100 px-4 py-3 rounded-md text-center","data-matrix-id":"src/components/Navigation.tsx:118:10","data-matrix-name":"div","data-component-path":"src/components/Navigation.tsx","data-component-line":"118","data-component-file":"Navigation.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-neutral-100%20px-4%20py-3%20rounded-md%20text-center%22%7D",children:t.jsxs("span",{className:"text-small text-neutral-700","data-matrix-id":"src/components/Navigation.tsx:119:12","data-matrix-name":"span","data-component-path":"src/components/Navigation.tsx","data-component-line":"119","data-component-file":"Navigation.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-small%20text-neutral-700%22%7D",children:["已添加 ",t.jsx("span",{className:"font-semibold text-neutral-900","data-matrix-id":"src/components/Navigation.tsx:120:18","data-matrix-name":"span","data-component-path":"src/components/Navigation.tsx","data-component-line":"120","data-component-file":"Navigation.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-semibold%20text-neutral-900%22%7D",children:o})," 位同学"]})}),t.jsxs("button",{onClick:()=>{c(),B(!1)},className:"w-full btn-secondary flex items-center justify-center gap-2","data-matrix-id":"src/components/Navigation.tsx:125:10","data-matrix-name":"button","data-component-path":"src/components/Navigation.tsx","data-component-line":"125","data-component-file":"Navigation.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20btn-secondary%20flex%20items-center%20justify-center%20gap-2%22%7D",children:[t.jsx(St,{className:"w-5 h-5","data-matrix-id":"src/components/Navigation.tsx:132:12","data-matrix-name":"Palette","data-component-path":"src/components/Navigation.tsx","data-component-line":"132","data-component-file":"Navigation.tsx","data-component-name":"Palette","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),t.jsx("span",{"data-matrix-id":"src/components/Navigation.tsx:133:12","data-matrix-name":"span","data-component-path":"src/components/Navigation.tsx","data-component-line":"133","data-component-file":"Navigation.tsx","data-component-name":"span",children:"颜色管理"})]}),t.jsxs("button",{onClick:()=>{f(),B(!1)},className:"w-full btn-primary flex items-center justify-center gap-2","data-matrix-id":"src/components/Navigation.tsx:137:10","data-matrix-name":"button","data-component-path":"src/components/Navigation.tsx","data-component-line":"137","data-component-file":"Navigation.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20btn-primary%20flex%20items-center%20justify-center%20gap-2%22%7D",children:[t.jsx(Ot,{className:"w-5 h-5","data-matrix-id":"src/components/Navigation.tsx:144:12","data-matrix-name":"Download","data-component-path":"src/components/Navigation.tsx","data-component-line":"144","data-component-file":"Navigation.tsx","data-component-name":"Download","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),t.jsx("span",{"data-matrix-id":"src/components/Navigation.tsx:145:12","data-matrix-name":"span","data-component-path":"src/components/Navigation.tsx","data-component-line":"145","data-component-file":"Navigation.tsx","data-component-name":"span",children:"导出当前地图"})]})]})]})}const Ua=(a,n=.85)=>{let o=a.replace("#","");o.length===3&&(o=o.split("").map(C=>C+C).join(""));const f=parseInt(o,16),c=f>>16&255,g=f>>8&255,B=f&255;return`rgba(${c}, ${g}, ${B}, ${n})`},ta=a=>{const n=a.isCustom;return{bgClass:n?"":a.bg,borderClass:n?"":a.border,textClass:n?"text-white":a.text,style:n&&a.hex?{backgroundColor:Ua(a.hex),borderColor:a.hex,color:"#fff"}:void 0}};function Ga({student:a,onEdit:n,onDelete:o,compact:f=!1}){const c=Nt(Et(a.region_id)),g=ta(c),B=g.textClass;return f?t.jsx("div",{className:`${g.bgClass} backdrop-blur-sm rounded-md shadow-md border ${g.borderClass} p-1 
        hover:shadow-lg transition-all duration-base cursor-pointer group`,style:g.style,onClick:()=>n(a),"data-matrix-id":"src/components/StudentCard.tsx:45:6","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"45","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22style%22%3A%22%5BMemberExpression%5D%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:t.jsxs("div",{className:"flex items-center justify-between gap-1.5","data-matrix-id":"src/components/StudentCard.tsx:51:8","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"51","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20gap-1.5%22%7D",children:[t.jsx("div",{className:"flex-1 min-w-0","data-matrix-id":"src/components/StudentCard.tsx:52:10","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"52","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20min-w-0%22%7D",children:t.jsxs("p",{className:`text-[11px] font-semibold ${B} truncate leading-tight`,"data-matrix-id":"src/components/StudentCard.tsx:53:12","data-matrix-name":"p","data-component-path":"src/components/StudentCard.tsx","data-component-line":"53","data-component-file":"StudentCard.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[a.name," ",t.jsxs("span",{className:"font-normal opacity-80","data-matrix-id":"src/components/StudentCard.tsx:54:29","data-matrix-name":"span","data-component-path":"src/components/StudentCard.tsx","data-component-line":"54","data-component-file":"StudentCard.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-normal%20opacity-80%22%7D",children:["| ",a.city]})]})}),t.jsxs("div",{className:"flex gap-0.5","data-matrix-id":"src/components/StudentCard.tsx:57:10","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"57","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-0.5%22%7D",children:[t.jsx("button",{onClick:C=>{C.stopPropagation(),n(a)},className:"p-0.5 hover:bg-white/30 rounded transition-colors",title:"编辑","data-matrix-id":"src/components/StudentCard.tsx:58:12","data-matrix-name":"button","data-component-path":"src/components/StudentCard.tsx","data-component-line":"58","data-component-file":"StudentCard.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-0.5%20hover%3Abg-white%2F30%20rounded%20transition-colors%22%2C%22title%22%3A%22%E7%BC%96%E8%BE%91%22%7D",children:t.jsx(Zt,{className:"w-3 h-3 text-white","data-matrix-id":"src/components/StudentCard.tsx:66:14","data-matrix-name":"Edit2","data-component-path":"src/components/StudentCard.tsx","data-component-line":"66","data-component-file":"StudentCard.tsx","data-component-name":"Edit2","data-component-content":"%7B%22className%22%3A%22w-3%20h-3%20text-white%22%7D"})}),t.jsx("button",{onClick:C=>{C.stopPropagation(),window.confirm("确定要删除这位同学吗？")&&o(a.id)},className:"p-0.5 hover:bg-red-100/30 rounded transition-colors",title:"删除","data-matrix-id":"src/components/StudentCard.tsx:68:12","data-matrix-name":"button","data-component-path":"src/components/StudentCard.tsx","data-component-line":"68","data-component-file":"StudentCard.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-0.5%20hover%3Abg-red-100%2F30%20rounded%20transition-colors%22%2C%22title%22%3A%22%E5%88%A0%E9%99%A4%22%7D",children:t.jsx(Qt,{className:"w-3 h-3 text-white","data-matrix-id":"src/components/StudentCard.tsx:78:14","data-matrix-name":"Trash2","data-component-path":"src/components/StudentCard.tsx","data-component-line":"78","data-component-file":"StudentCard.tsx","data-component-name":"Trash2","data-component-content":"%7B%22className%22%3A%22w-3%20h-3%20text-white%22%7D"})})]})]})}):t.jsx("div",{className:`${g.bgClass} backdrop-blur-sm rounded-md shadow-md border ${g.borderClass} p-2 
      hover:shadow-lg hover:-translate-y-0.5 transition-all duration-base cursor-pointer group`,style:g.style,onClick:()=>n(a),"data-matrix-id":"src/components/StudentCard.tsx:87:4","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"87","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22style%22%3A%22%5BMemberExpression%5D%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:t.jsxs("div",{className:"flex items-start justify-between gap-2","data-matrix-id":"src/components/StudentCard.tsx:93:6","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"93","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-start%20justify-between%20gap-2%22%7D",children:[t.jsxs("div",{className:"flex-1 min-w-0","data-matrix-id":"src/components/StudentCard.tsx:94:8","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"94","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20min-w-0%22%7D",children:[t.jsx("h3",{className:`text-sm font-semibold ${B} mb-0.5`,"data-matrix-id":"src/components/StudentCard.tsx:95:10","data-matrix-name":"h3","data-component-path":"src/components/StudentCard.tsx","data-component-line":"95","data-component-file":"StudentCard.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:a.name}),t.jsxs("p",{className:`text-xs ${B} opacity-80`,"data-matrix-id":"src/components/StudentCard.tsx:96:10","data-matrix-name":"p","data-component-path":"src/components/StudentCard.tsx","data-component-line":"96","data-component-file":"StudentCard.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[a.city," · ",a.region_name]})]}),t.jsxs("div",{className:"flex gap-1","data-matrix-id":"src/components/StudentCard.tsx:98:8","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"98","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-1%22%7D",children:[t.jsx("button",{onClick:C=>{C.stopPropagation(),n(a)},className:"p-1 hover:bg-white/30 rounded transition-colors",title:"编辑","data-matrix-id":"src/components/StudentCard.tsx:99:10","data-matrix-name":"button","data-component-path":"src/components/StudentCard.tsx","data-component-line":"99","data-component-file":"StudentCard.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-white%2F30%20rounded%20transition-colors%22%2C%22title%22%3A%22%E7%BC%96%E8%BE%91%22%7D",children:t.jsx(Zt,{className:"w-3 h-3 text-white","data-matrix-id":"src/components/StudentCard.tsx:107:12","data-matrix-name":"Edit2","data-component-path":"src/components/StudentCard.tsx","data-component-line":"107","data-component-file":"StudentCard.tsx","data-component-name":"Edit2","data-component-content":"%7B%22className%22%3A%22w-3%20h-3%20text-white%22%7D"})}),t.jsx("button",{onClick:C=>{C.stopPropagation(),window.confirm("确定要删除这位同学吗？")&&o(a.id)},className:"p-1 hover:bg-red-100/30 rounded transition-colors",title:"删除","data-matrix-id":"src/components/StudentCard.tsx:109:10","data-matrix-name":"button","data-component-path":"src/components/StudentCard.tsx","data-component-line":"109","data-component-file":"StudentCard.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-1%20hover%3Abg-red-100%2F30%20rounded%20transition-colors%22%2C%22title%22%3A%22%E5%88%A0%E9%99%A4%22%7D",children:t.jsx(Qt,{className:"w-3 h-3 text-white","data-matrix-id":"src/components/StudentCard.tsx:119:12","data-matrix-name":"Trash2","data-component-path":"src/components/StudentCard.tsx","data-component-line":"119","data-component-file":"StudentCard.tsx","data-component-name":"Trash2","data-component-content":"%7B%22className%22%3A%22w-3%20h-3%20text-white%22%7D"})})]})]})})}const Va=s.memo(function({students:n,regionName:o,position:f,onEdit:c,onDelete:g,onDrag:B,cardRef:C}){const[b,j]=s.useState(!1),$=s.useRef({x:0,y:0}),R=s.useRef({x:0,y:0}),V=s.useRef(null),Q=C||V,E=s.useRef(null),p=s.useRef(!1),k=1,z=P=>{const nt=P.target;if(nt.closest("button")||nt.tagName==="BUTTON"||nt.closest("a, input, textarea, select"))return;P.preventDefault(),P.stopPropagation(),P.nativeEvent.stopImmediatePropagation();const rt=P.clientX,K=P.clientY;$.current={x:rt,y:K},R.current={x:rt,y:K},p.current=!1,document.body.style.userSelect="none";const yt=tt=>{const lt=tt.clientX,ot=tt.clientY,wt=lt-$.current.x,gt=ot-$.current.y,M=Math.sqrt(wt*wt+gt*gt);if(!p.current){if(M<k)return;p.current=!0,j(!0),document.body.style.cursor="grabbing",R.current={x:$.current.x,y:$.current.y};return}const L=lt-R.current.x,vt=ot-R.current.y;Math.abs(L)<.1&&Math.abs(vt)<.1||(E.current&&cancelAnimationFrame(E.current),E.current=requestAnimationFrame(()=>{const Z=Q.current,kt=(Z==null?void 0:Z.closest("[data-map-container]"))||(Z==null?void 0:Z.closest(".relative"))||document.querySelector("[data-map-container]")||document.querySelector(".relative");if(kt){const Bt=kt.getBoundingClientRect(),Ct=L/Bt.width*100,bt=vt/Bt.height*100;B(Ct,bt)}else{const Bt=window.innerWidth,Ct=window.innerHeight,bt=L/Bt*100,Pt=vt/Ct*100;B(bt,Pt)}R.current={x:lt,y:ot}}))},ht=tt=>{if(tt&&(tt.preventDefault(),tt.stopPropagation()),E.current&&(cancelAnimationFrame(E.current),E.current=null),document.removeEventListener("mousemove",yt),document.removeEventListener("mouseup",ht),!p.current){document.body.style.userSelect="",document.body.style.cursor="";return}j(!1),p.current=!1,document.body.style.userSelect="",document.body.style.cursor=""};document.addEventListener("mousemove",yt,{passive:!1}),document.addEventListener("mouseup",ht,{once:!0});const mt=()=>{ht(),document.removeEventListener("mouseleave",mt)};document.addEventListener("mouseleave",mt,{once:!0})};if(n.length===0)return null;const W=Nt(Et(n[0].region_id)),J=ta(W),Y=J.textClass,ut=n.length>1;return t.jsxs("div",{ref:Q,onMouseDown:z,className:`${J.bgClass} backdrop-blur-sm rounded-md shadow-md border ${J.borderClass} px-2.5 py-1.5 
      hover:shadow-lg group min-w-[150px] max-w-[210px] select-none ${b?"cursor-grabbing shadow-2xl scale-105 opacity-90 z-50 transition-none":"cursor-grab transition-all duration-200"}`,style:{...J.style,...b?{pointerEvents:"auto",willChange:"transform",userSelect:"none",WebkitUserSelect:"none"}:{userSelect:"none",WebkitUserSelect:"none"},touchAction:"none"},"data-matrix-id":"src/components/StudentCard.tsx:304:4","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"304","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22onMouseDown%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22style%22%3A%7B%22touchAction%22%3A%22none%22%7D%7D",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-1","data-matrix-id":"src/components/StudentCard.tsx:327:6","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"327","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%20mb-1%22%7D",children:[t.jsx(Na,{className:"w-3 h-3 text-white/60 flex-shrink-0","data-matrix-id":"src/components/StudentCard.tsx:328:8","data-matrix-name":"GripVertical","data-component-path":"src/components/StudentCard.tsx","data-component-line":"328","data-component-file":"StudentCard.tsx","data-component-name":"GripVertical","data-component-content":"%7B%22className%22%3A%22w-3%20h-3%20text-white%2F60%20flex-shrink-0%22%7D"}),t.jsxs("div",{className:"flex-1 flex flex-col justify-center leading-tight min-h-[28px]","data-matrix-id":"src/components/StudentCard.tsx:329:8","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"329","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20flex%20flex-col%20justify-center%20leading-tight%20min-h-%5B28px%5D%22%7D",children:[t.jsx("p",{className:`text-[11px] font-semibold ${Y} whitespace-nowrap mb-0.5`,"data-matrix-id":"src/components/StudentCard.tsx:330:10","data-matrix-name":"p","data-component-path":"src/components/StudentCard.tsx","data-component-line":"330","data-component-file":"StudentCard.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:o}),ut?t.jsxs("p",{className:`text-[10px] ${Y} opacity-80`,"data-matrix-id":"src/components/StudentCard.tsx:332:12","data-matrix-name":"p","data-component-path":"src/components/StudentCard.tsx","data-component-line":"332","data-component-file":"StudentCard.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[n.length," 位同学"]}):t.jsx("p",{className:`text-[10px] ${Y} opacity-80`,"data-matrix-id":"src/components/StudentCard.tsx:334:12","data-matrix-name":"p","data-component-path":"src/components/StudentCard.tsx","data-component-line":"334","data-component-file":"StudentCard.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:"1 位同学"})]})]}),t.jsx("div",{className:"space-y-1.5 max-h-[200px] overflow-y-auto pr-0.5","data-matrix-id":"src/components/StudentCard.tsx:339:6","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"339","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-1.5%20max-h-%5B200px%5D%20overflow-y-auto%20pr-0.5%22%7D",children:n.map((P,nt)=>{const it=Nt(Et(P.region_id)),rt=ta(it);return t.jsxs("div",{className:`flex items-center justify-between gap-1.5 px-2 py-1.5 ${rt.bgClass} rounded border ${rt.borderClass}`,style:{...rt.style,marginBottom:nt<n.length-1?"6px":"0",minHeight:"34px"},"data-matrix-id":"src/components/StudentCard.tsx:344:12","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"344","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22style%22%3A%7B%22marginBottom%22%3A%22%5BConditionalExpression%5D%22%2C%22minHeight%22%3A%2234px%22%7D%7D",children:[t.jsx("div",{className:"flex-1 min-w-0 flex flex-col justify-center leading-tight","data-matrix-id":"src/components/StudentCard.tsx:353:14","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"353","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20min-w-0%20flex%20flex-col%20justify-center%20leading-tight%22%7D",children:t.jsxs("p",{className:`text-[11px] font-medium ${rt.textClass} leading-tight`,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"140px",margin:0,padding:0},"data-matrix-id":"src/components/StudentCard.tsx:354:16","data-matrix-name":"p","data-component-path":"src/components/StudentCard.tsx","data-component-line":"354","data-component-file":"StudentCard.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22style%22%3A%7B%22whiteSpace%22%3A%22nowrap%22%2C%22overflow%22%3A%22hidden%22%2C%22textOverflow%22%3A%22ellipsis%22%2C%22maxWidth%22%3A%22140px%22%2C%22margin%22%3A0%2C%22padding%22%3A0%7D%7D",children:[P.name," | ",P.city]})}),t.jsxs("div",{className:"flex gap-0.5 flex-shrink-0","data-matrix-id":"src/components/StudentCard.tsx:368:14","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"368","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-0.5%20flex-shrink-0%22%7D",children:[t.jsx("button",{onClick:K=>{K.stopPropagation(),c(P)},className:"p-0.5 hover:bg-white/30 rounded transition-colors",title:"编辑","data-matrix-id":"src/components/StudentCard.tsx:369:16","data-matrix-name":"button","data-component-path":"src/components/StudentCard.tsx","data-component-line":"369","data-component-file":"StudentCard.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-0.5%20hover%3Abg-white%2F30%20rounded%20transition-colors%22%2C%22title%22%3A%22%E7%BC%96%E8%BE%91%22%7D",children:t.jsx(Zt,{className:"w-2.5 h-2.5 text-white","data-matrix-id":"src/components/StudentCard.tsx:377:18","data-matrix-name":"Edit2","data-component-path":"src/components/StudentCard.tsx","data-component-line":"377","data-component-file":"StudentCard.tsx","data-component-name":"Edit2","data-component-content":"%7B%22className%22%3A%22w-2.5%20h-2.5%20text-white%22%7D"})}),t.jsx("button",{onClick:K=>{K.stopPropagation(),window.confirm("确定要删除这位同学吗？")&&g(P.id)},className:"p-0.5 hover:bg-red-100/30 rounded transition-colors",title:"删除","data-matrix-id":"src/components/StudentCard.tsx:379:16","data-matrix-name":"button","data-component-path":"src/components/StudentCard.tsx","data-component-line":"379","data-component-file":"StudentCard.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-0.5%20hover%3Abg-red-100%2F30%20rounded%20transition-colors%22%2C%22title%22%3A%22%E5%88%A0%E9%99%A4%22%7D",children:t.jsx(Qt,{className:"w-2.5 h-2.5 text-white","data-matrix-id":"src/components/StudentCard.tsx:389:18","data-matrix-name":"Trash2","data-component-path":"src/components/StudentCard.tsx","data-component-line":"389","data-component-file":"StudentCard.tsx","data-component-name":"Trash2","data-component-content":"%7B%22className%22%3A%22w-2.5%20h-2.5%20text-white%22%7D"})})]})]},P.id)})})]})},(a,n)=>a.students.length===n.students.length&&a.students.every((f,c)=>{var g;return f.id===((g=n.students[c])==null?void 0:g.id)})&&a.regionName===n.regionName&&Math.abs(a.position.x-n.position.x)<.01&&Math.abs(a.position.y-n.position.y)<.01&&a.onEdit===n.onEdit&&a.onDelete===n.onDelete&&a.onDrag===n.onDrag);function Ja({count:a,onClick:n}){return t.jsxs("div",{onClick:n,className:`bg-primary-500/75 backdrop-blur-sm rounded-md shadow-lg border border-primary-600 p-3 
      hover:bg-primary-500/85 hover:-translate-y-1 hover:shadow-xl transition-all duration-base cursor-pointer
      flex flex-col items-center justify-center text-white min-w-[80px]`,"data-matrix-id":"src/components/StudentCard.tsx:423:4","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"423","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22bg-primary-500%2F75%20backdrop-blur-sm%20rounded-md%20shadow-lg%20border%20border-primary-600%20p-3%20%5Cn%20%20%20%20%20%20hover%3Abg-primary-500%2F85%20hover%3A-translate-y-1%20hover%3Ashadow-xl%20transition-all%20duration-base%20cursor-pointer%5Cn%20%20%20%20%20%20flex%20flex-col%20items-center%20justify-center%20text-white%20min-w-%5B80px%5D%22%7D",children:[t.jsx("div",{className:"text-2xl font-bold leading-tight","data-matrix-id":"src/components/StudentCard.tsx:429:6","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"429","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20leading-tight%22%7D",children:a}),t.jsx("div",{className:"text-xs mt-0.5","data-matrix-id":"src/components/StudentCard.tsx:430:6","data-matrix-name":"div","data-component-path":"src/components/StudentCard.tsx","data-component-line":"430","data-component-file":"StudentCard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-xs%20mt-0.5%22%7D",children:"位同学"})]})}const ma="meal-map",Ka=a=>{try{const n=`${ma}-${a}-card-positions`,o=localStorage.getItem(n);if(o)return JSON.parse(o)}catch{}return{}},Za=(a,n)=>{try{const o=`${ma}-${a}-card-positions`;localStorage.setItem(o,JSON.stringify(n))}catch{}};function Qa({country:a,regions:n,students:o,onRegionClick:f,onStudentEdit:c,onStudentDelete:g,onShowList:B,colorChanged:C}){s.useEffect(()=>{if(!n||n.length===0){j(`
        <svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" class="w-full h-full">
          <text x="400" y="300" text-anchor="middle" font-size="18" fill="#666">
            暂无地区数据
          </text>
        </svg>
      `),R(!1);return}J({}),j(""),R(!0),Ct().then(()=>{R(!1)})},[a,n]),s.useEffect(()=>{const e=Ka(a);ut(e),z(a==="china"?1.15:1)},[a]),s.useEffect(()=>{yt(jt())},[C]);const[b,j]=s.useState(""),[$,R]=s.useState(!0),[V,Q]=s.useState(!1),[E,p]=s.useState(null),[k,z]=s.useState(a==="china"?1.15:1),[W,J]=s.useState({}),[Y,ut]=s.useState({}),[P,nt]=s.useState({width:1200,height:900}),[it,rt]=s.useState(0),[K,yt]=s.useState(jt()),[ht,mt]=s.useState({}),tt=s.useRef(null),lt=s.useRef(null),ot=s.useRef(null),wt=s.useRef(null),gt=s.useRef(null),M=s.useRef(null),L=s.useCallback(e=>{const r=[e];if(e.startsWith("CN-")&&r.push(e.replace("CN-","")),a==="usa"&&e.startsWith("US-")){const x=e.replace("US-",""),d={AL:"01",AK:"02",AZ:"04",AR:"05",CA:"06",CO:"08",CT:"09",DE:"10",DC:"11",FL:"12",GA:"13",HI:"15",ID:"16",IL:"17",IN:"18",IA:"19",KS:"20",KY:"21",LA:"22",ME:"23",MD:"24",MA:"25",MI:"26",MN:"27",MS:"28",MO:"29",MT:"30",NE:"31",NV:"32",NH:"33",NJ:"34",NM:"35",NY:"36",NC:"37",ND:"38",OH:"39",OK:"40",OR:"41",PA:"42",RI:"44",SC:"45",SD:"46",TN:"47",TX:"48",UT:"49",VT:"50",VA:"51",WA:"53",WV:"54",WI:"55",WY:"56"}[x];d&&r.push(`US-${d}`)}return r},[a]),vt=e=>{if(!e)return;let r=n.find(x=>x.id===e);if(r)return r;if(a==="china"){if(r=n.find(x=>x.id===`CN-${e}`),r||(r=n.find(x=>`CN-${x.id}`===e),r))return r}else if(a==="usa"){const x={"01":"AL","02":"AK","04":"AZ","05":"AR","06":"CA","08":"CO","09":"CT",10:"DE",11:"DC",12:"FL",13:"GA",15:"HI",16:"ID",17:"IL",18:"IN",19:"IA",20:"KS",21:"KY",22:"LA",23:"ME",24:"MD",25:"MA",26:"MI",27:"MN",28:"MS",29:"MO",30:"MT",31:"NE",32:"NV",33:"NH",34:"NJ",35:"NM",36:"NY",37:"NC",38:"ND",39:"OH",40:"OK",41:"OR",42:"PA",44:"RI",45:"SC",46:"SD",47:"TN",48:"TX",49:"UT",50:"VT",51:"VA",53:"WA",54:"WV",55:"WI",56:"WY"};if(e.startsWith("US-")){const h=e.split("-")[1],d=x[h];if(d&&(r=n.find(l=>l.id===`US-${d}`),r))return r}}if(r=n.find(x=>x.id.endsWith(`-${e}`)),r)return r},Z=s.useMemo(()=>o.reduce((e,r)=>(e[r.region_id]||(e[r.region_id]=[]),e[r.region_id].push(r),e),{}),[o]),kt=s.useCallback(e=>{const{lat:r,lng:x}=e.coordinates;if(a==="china"){const h=(x-73)/62*100,d=(54-r)/36*100;return{x:Math.max(0,Math.min(100,h)),y:Math.max(0,Math.min(100,d))}}else{const h=(x+125)/59*100,d=(50-r)/26*100;return{x:Math.max(0,Math.min(100,h)),y:Math.max(0,Math.min(100,d))}}},[a]),Bt=s.useCallback((e,r,x)=>{const h=K.emptyRegionColor||"#cccccc",d=(l,u)=>{l&&(l.setAttribute("fill",u),l.style.setProperty("fill",u),l.style.setProperty("fill-opacity","1"),l.removeAttribute("fill-opacity"),l.removeAttribute("opacity"),l.style.removeProperty("opacity"))};e.querySelectorAll("path[data-region-id]").forEach(l=>{d(l,h)}),Object.entries(r).forEach(([l])=>{const u=x.find(w=>w.id===l);if(!u)return;let N=Et(l);if(!N.startsWith("#")){const w=xt.find(S=>S.value===N);N=w?w.hex:N}const D=L(l);let i=!1;for(const w of D){const S=e.querySelector(`path[data-region-id="${w}"]`);S&&(d(S,N),i=!0);const F=e.querySelector(`path[id="${w}"]`);F&&(d(F,N),i=!0)}if(!i){const S=Array.from(e.querySelectorAll("path[data-region-name]")).find(F=>{const H=F.getAttribute("data-region-name"),et=F.getAttribute("data-region-id")||"";return H===u.name_en||et===u.id||(et==null?void 0:et.replace("CN-",""))===u.id.replace("CN-","")||(et==null?void 0:et.replace("US-",""))===u.id.replace("US-","")});S&&d(S,N)}})},[K.emptyRegionColor,L]),Ct=async()=>{try{const r=`/maps/${a==="china"?"china-combined.svg":"usa-combined.svg"}`,x=await fetch(r);if(!x.ok)throw new Error(`Failed to load ${r}`);const h=await x.text(),u=new DOMParser().parseFromString(h,"image/svg+xml").querySelector("svg");if(!u)throw new Error("Invalid SVG structure");const N=u.getAttribute("viewBox");let D=1200,i=900;if(N){const[,,y,dt]=N.split(" ").map(Number);D=y,i=dt}u.setAttribute("viewBox",`0 0 ${D} ${i}`),u.setAttribute("width","100%"),u.setAttribute("height","100%"),u.getAttribute("preserveAspectRatio")||u.setAttribute("preserveAspectRatio","xMidYMid meet");const w=document.createElement("canvas");w.width=D,w.height=i;const S=w.getContext("2d"),F=(y,dt)=>{if(!S||!y)return null;try{const T=new Path2D(y),{minX:X,maxX:O,minY:q,maxY:_}=dt,pt=O-X,U=_-q,m=(G,st)=>({x:Math.max(X,Math.min(O,G)),y:Math.max(q,Math.min(_,st))}),v=(X+O)/2,A=(q+_)/2,I=[{x:v,y:A},{x:v,y:A-U*.06},{x:v,y:A+U*.06},{x:v-pt*.06,y:A},{x:v+pt*.06,y:A}],ct=[.3,.45,.6,.75];ct.forEach(G=>{ct.forEach(st=>{I.push({x:X+pt*G,y:q+U*st})})});for(const G of I){const st=m(G.x,G.y);if(S.isPointInPath(T,st.x,st.y))return st}}catch{return null}return null},H={};n.forEach(y=>{const dt=[y.id,y.id.replace("CN-",""),y.id.replace("US-",""),`CN-${y.id}`,`US-${y.id}`];let T=null;for(const X of dt){const O=u.querySelector(`path[data-region-id="${X}"], path[id="${X}"]`);if(O){const q=O.getAttribute("d");if(q){const _=[];if((q.match(/(-?\d+\.?\d*)[\s,]+(-?\d+\.?\d*)/g)||[]).forEach(U=>{const m=U.match(/(-?\d+\.?\d*)[\s,]+(-?\d+\.?\d*)/);if(m){const v=parseFloat(m[1]),A=parseFloat(m[2]);!isNaN(v)&&!isNaN(A)&&v>=0&&v<=D&&A>=0&&A<=i&&_.push({x:v,y:A})}}),_.length>0){let U=_[0].x,m=_[0].x,v=_[0].y,A=_[0].y;_.forEach(ft=>{U=Math.min(U,ft.x),m=Math.max(m,ft.x),v=Math.min(v,ft.y),A=Math.max(A,ft.y)});const I=(U+m)/2,ct=(v+A)/2,G=m-U,st=A-v,fa=Math.min(st*.12,i*.02),qt=F(q,{minX:U,maxX:m,minY:v,maxY:A});let Ut=I,Gt=ct-fa;const ga=_.reduce((ft,Vt)=>ft+Vt.x,0)/_.length,va=_.reduce((ft,Vt)=>ft+Vt.y,0)/_.length;Ut=Ut*.6+ga*.4,Gt=Gt*.6+va*.4;let Tt=Math.max(U+G*.12,Math.min(m-G*.12,Ut)),_t=Math.max(v+st*.12,Math.min(A-st*.12,Gt));qt&&(Tt=qt.x,_t=qt.y),Tt=Math.max(U,Math.min(m,Tt)),_t=Math.max(v,Math.min(A,_t));const Ca=G/D*100,ba=st/i*100;T={x:Tt/D*100,y:_t/i*100,width:Ca,height:ba};break}}}}if(!T){const X=kt(y);T={x:X.x,y:X.y,width:4,height:4}}H[y.id]=T}),J(H),Bt(u,Z,n);const Mt=new XMLSerializer().serializeToString(u);j(Mt),nt({width:D,height:i}),R(!1)}catch{j(`
        <svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" class="w-full h-full">
          <text x="400" y="300" text-anchor="middle" font-size="18" fill="#666">
            地图加载失败，请刷新页面重试
          </text>
        </svg>
      `)}};s.useEffect(()=>{o.length>=0&&n.length>0&&setTimeout(()=>{Ct()},100)},[o.length,n.length,a]),s.useEffect(()=>{C!==void 0&&C>0&&b&&setTimeout(()=>{Ct()},100)},[C,b]),s.useCallback(()=>{rt(e=>e+1)},[]),s.useEffect(()=>{const e=lt.current;if(!e)return;const r=l=>{const N=l.currentTarget.getAttribute("data-region-id");if(N){const D=vt(N);if(D){const i=Z[D.id]||[];i.length>=4?B(D,i):f(D)}}},x=l=>{const u=l.currentTarget;p(u.getAttribute("data-region-id"))},h=()=>{p(null)},d=e.querySelectorAll("path[data-region-id]");return d.forEach(l=>{l.addEventListener("click",r),l.addEventListener("mouseover",x),l.addEventListener("mouseout",h)}),()=>{d.forEach(l=>{l.removeEventListener("click",r),l.removeEventListener("mouseover",x),l.removeEventListener("mouseout",h)})}},[b,n,f,Z,B]);const bt=s.useRef(null),Pt=s.useCallback((e,r,x,h,d,l,u,N)=>{const D=(e-x)*(l-N)-(r-h)*(d-u);if(Math.abs(D)<1e-10)return!1;const i=((e-d)*(l-N)-(r-l)*(d-u))/D,w=-((e-x)*(r-l)-(r-h)*(e-d))/D;return i>=0&&i<=1&&w>=0&&w<=1},[]);s.useCallback((e,r,x,h,d,l,u,N)=>{if(e>=d&&e<=u&&r>=l&&r<=N||x>=d&&x<=u&&h>=l&&h<=N)return!0;const D=[{x1:d,y1:l,x2:u,y2:l},{x1:u,y1:l,x2:u,y2:N},{x1:u,y1:N,x2:d,y2:N},{x1:d,y1:N,x2:d,y2:l}];for(const i of D)if(Pt(e,r,x,h,i.x1,i.y1,i.x2,i.y2))return!0;return!1},[Pt]);const Ht=s.useRef({}),It=s.useRef({}),ea=s.useRef(new Map),At=s.useRef(Y),Lt=s.useRef(null),Xt=s.useRef(!1);s.useEffect(()=>{It.current={...Y},At.current=Y},[Y]);const at=s.useCallback(e=>{if(Object.keys(Z).length===0||Object.keys(W).length===0){mt({});return}const r=gt.current;if(!r){mt({});return}const x=P.width||1200,h=P.height||900,d=r.getScreenCTM();if(!d)return;const l=d.inverse(),u=w=>{const S=r.createSVGPoint();S.x=w.x,S.y=w.y;const F=S.matrixTransform(l);return{x:F.x,y:F.y}},N=w=>{const S=r.createSVGPoint();S.x=w.x,S.y=w.y;const F=S.matrixTransform(d);return{x:F.x,y:F.y}},D={},i=e||At.current;Object.entries(Z).forEach(([w,S])=>{if(!S||S.length===0)return;const F=W[w],H=ea.current.get(w);if(!F||!H)return;const y=(H.querySelector('[data-inner-card="true"]')||H).getBoundingClientRect();if(y.width===0||y.height===0)return;const dt={x:F.x/100*x,y:F.y/100*h};i[w];const T={x:y.left+y.width/2,y:y.top+y.height/2},X=N(dt),O=X.x-T.x,q=X.y-T.y;let _=T.x,pt=T.y;if(Math.abs(O)>1e-6||Math.abs(q)>1e-6){const v=[];if(Math.abs(q)>1e-6){let A=(y.top-T.y)/q;if(A>=0&&A<=1){const I=T.x+A*O;I>=y.left&&I<=y.right&&v.push({x:I,y:y.top})}if(A=(y.bottom-T.y)/q,A>=0&&A<=1){const I=T.x+A*O;I>=y.left&&I<=y.right&&v.push({x:I,y:y.bottom})}}if(Math.abs(O)>1e-6){let A=(y.left-T.x)/O;if(A>=0&&A<=1){const I=T.y+A*q;I>=y.top&&I<=y.bottom&&v.push({x:y.left,y:I})}if(A=(y.right-T.x)/O,A>=0&&A<=1){const I=T.y+A*q;I>=y.top&&I<=y.bottom&&v.push({x:y.right,y:I})}}if(v.length>0){const A=v.reduce((I,ct)=>{const G=Math.pow(ct.x-X.x,2)+Math.pow(ct.y-X.y,2);return G<I.dist?{dist:G,point:ct}:I},{dist:1/0,point:v[0]}).point;_=A.x,pt=A.y}}const U=u({x:_,y:pt}),m=dt;D[w]={start:U,end:m}}),mt(D)},[W,Z,P]),na=s.useCallback(()=>{if(Lt.current!==null)return;const e=()=>{if(!Xt.current){Lt.current=null;return}at(At.current),Lt.current=requestAnimationFrame(e)};Lt.current=requestAnimationFrame(e)},[at]);s.useEffect(()=>(window.__mealMapForceLineRecalc=()=>new Promise(e=>{at(At.current),requestAnimationFrame(()=>e())}),()=>{delete window.__mealMapForceLineRecalc}),[at]),s.useEffect(()=>(window.__mealMapPrepareExport=async()=>{const e=tt.current;if(!e)return()=>{};const r=Array.from(e.querySelectorAll("[data-export-scale-layer]")),x=Array.from(e.querySelectorAll("[data-card-id]")),h=e.getBoundingClientRect();let d=h.left,l=h.top,u=h.right,N=h.bottom;r.forEach(m=>{const v=m.getBoundingClientRect();d=Math.min(d,v.left),l=Math.min(l,v.top),u=Math.max(u,v.right),N=Math.max(N,v.bottom)}),x.forEach(m=>{const v=m.getBoundingClientRect();d=Math.min(d,v.left),l=Math.min(l,v.top),u=Math.max(u,v.right),N=Math.max(N,v.bottom)});const D=Math.ceil(Math.max(16,h.left-d+16)),i=Math.ceil(Math.max(16,h.top-l+16)),w=Math.ceil(Math.max(16,u-h.right+16)),S=Math.ceil(Math.max(16,N-h.bottom+16)),F=h.width+D+w,H=h.height+i+S,et=Math.floor(d)-D,Mt=Math.floor(l)-i,y=Math.ceil(u)+w,dt=Math.ceil(N)+S,T=y-et,X=dt-Mt,O=48,q=et-O,_=Mt-O,pt=T+O*2,U=X+O*2;return e.dataset.exportWidthPx=`${F}`,e.dataset.exportHeightPx=`${H}`,e.dataset.exportPaddingLeftPx=`${D}`,e.dataset.exportPaddingRightPx=`${w}`,e.dataset.exportPaddingTopPx=`${i}`,e.dataset.exportPaddingBottomPx=`${S}`,e.dataset.exportBoundsLeftPx=`${q}`,e.dataset.exportBoundsTopPx=`${_}`,e.dataset.exportBoundsWidthPx=`${pt}`,e.dataset.exportBoundsHeightPx=`${U}`,r.forEach(m=>{const v=m.getBoundingClientRect(),A=m.offsetParent;let I=0,ct=0;if(A){const G=A.getBoundingClientRect();I=G.left,ct=G.top}m.dataset.exportWidthPx=`${v.width}`,m.dataset.exportHeightPx=`${v.height}`,m.dataset.exportLeftPx=`${v.left-I}`,m.dataset.exportTopPx=`${v.top-ct}`,m.dataset.exportTransition=m.style.transition||"",m.style.transition="none"}),x.forEach(m=>{const v=m.getBoundingClientRect();m.dataset.exportLeftPx=`${v.left-h.left}`,m.dataset.exportTopPx=`${v.top-h.top}`,m.dataset.exportWidthPx=`${v.width}`,m.dataset.exportHeightPx=`${v.height}`,m.dataset.exportTransition=m.style.transition||"",m.dataset.exportWillChange=m.style.willChange||"",m.style.transition="none"}),await new Promise(m=>requestAnimationFrame(()=>requestAnimationFrame(m))),window.__mealMapForceLineRecalc&&(await window.__mealMapForceLineRecalc(),await new Promise(m=>requestAnimationFrame(()=>requestAnimationFrame(m)))),()=>{x.forEach(m=>{delete m.dataset.exportLeftPx,delete m.dataset.exportTopPx,delete m.dataset.exportWidthPx,delete m.dataset.exportHeightPx;const v=m.dataset.exportTransition||"";m.style.transition=v,delete m.dataset.exportTransition,delete m.dataset.exportWillChange}),r.forEach(m=>{const v=m.dataset.exportTransition||"";m.style.transition=v,delete m.dataset.exportTransition,delete m.dataset.exportLeftPx,delete m.dataset.exportTopPx}),delete e.dataset.exportWidthPx,delete e.dataset.exportHeightPx,delete e.dataset.exportPaddingLeftPx,delete e.dataset.exportPaddingRightPx,delete e.dataset.exportPaddingTopPx,delete e.dataset.exportPaddingBottomPx,delete e.dataset.exportBoundsLeftPx,delete e.dataset.exportBoundsTopPx,delete e.dataset.exportBoundsWidthPx,delete e.dataset.exportBoundsHeightPx}},()=>{delete window.__mealMapPrepareExport}),[at]);const Dt=s.useCallback(e=>{M.current&&cancelAnimationFrame(M.current),M.current=requestAnimationFrame(()=>{at(e)})},[at]),la=s.useCallback((e,r,x)=>{const h=It.current[e]||{x:0,y:0},d=h.x+r,l=h.y+x,u=W[e];if(u){const N=u.x+d,D=u.y+l;let i=d,w=l;N<0?i=-u.x:N>100&&(i=100-u.x),D<0?w=-u.y:D>100&&(w=100-u.y);const S={x:i,y:w};Ht.current[e]=S,It.current[e]=S;const H={...At.current,[e]:S};Ht.current[e]=S,It.current[e]=S,At.current=H,Xt.current=!0,ut(H),Dt(H),na(),bt.current&&clearTimeout(bt.current),bt.current=setTimeout(()=>{Za(a,H)},300)}},[a,W,at,Dt,na]);s.useEffect(()=>{if(o.length===0){mt({});return}const e=setTimeout(()=>{at()},60);return()=>clearTimeout(e)},[o,at]),s.useEffect(()=>{if(o.length===0)return;const e=()=>at(),r=()=>requestAnimationFrame(e);r(),r(),r();const x=()=>r();window.addEventListener("resize",x);const h=new ResizeObserver(()=>r());return ot.current&&h.observe(ot.current),()=>{window.removeEventListener("resize",x),h.disconnect()}},[Y,W,k,P,at,o.length]),s.useEffect(()=>{const e=()=>{Xt.current=!1,at(At.current)},r=()=>Dt();return window.addEventListener("mouseup",e),window.addEventListener("mousemove",r),()=>{window.removeEventListener("mouseup",e),window.removeEventListener("mousemove",r)}},[at,Dt]);const pa=()=>z(e=>Math.min(e+.2,3)),xa=()=>z(e=>Math.max(e-.2,.5)),ua=()=>z(a==="china"?1.15:1),Ft=s.useCallback(async e=>{if(!tt.current)throw new Error("地图容器未准备好");const r=(e==null?void 0:e.format)??"png";let x;try{window.__mealMapPrepareExport?x=await window.__mealMapPrepareExport():window.__mealMapForceLineRecalc&&(await window.__mealMapForceLineRecalc(),await new Promise(i=>requestAnimationFrame(()=>requestAnimationFrame(i))));const d=tt.current.cloneNode(!0);d.style.position="fixed",d.style.top="0",d.style.left="0",d.style.pointerEvents="none",d.style.zIndex="-1",d.style.visibility="visible",d.style.opacity="1",d.style.boxSizing="border-box",d.setAttribute("data-export-temp","true"),(i=>{const w=Number(i.getAttribute("data-export-width-px")||"")||i.getBoundingClientRect().width,S=Number(i.getAttribute("data-export-height-px")||"")||i.getBoundingClientRect().height,F=Number(i.getAttribute("data-export-padding-left-px")||"")||0,H=Number(i.getAttribute("data-export-padding-right-px")||"")||0,et=Number(i.getAttribute("data-export-padding-top-px")||"")||0,Mt=Number(i.getAttribute("data-export-padding-bottom-px")||"")||0;i.style.width=`${w}px`,i.style.height=`${S}px`,i.style.paddingLeft=`${F}px`,i.style.paddingRight=`${H}px`,i.style.paddingTop=`${et}px`,i.style.paddingBottom=`${Mt}px`,i.style.overflow="visible",i.style.maxWidth="none",i.style.maxHeight="none",i.querySelectorAll("[data-export-ignore]").forEach(y=>y.remove())})(d),document.body.appendChild(d),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i));const u=await sa(d,{backgroundColor:K.canvasBackgroundColor||"#f5f5f5",scale:window.devicePixelRatio*2,logging:!1,useCORS:!0,allowTaint:!1,foreignObjectRendering:!0,scrollX:0,scrollY:0}),N=r==="jpeg"?"image/jpeg":"image/png",D=u.toDataURL(N);return document.body.removeChild(d),D}finally{x==null||x(),Dt()}},[Dt,K.canvasBackgroundColor]),ha=s.useCallback(async()=>{if(tt.current){Q(!0);try{const e=await Ft({format:"png"}),r=document.createElement("a"),x=new Date().toISOString().split("T")[0];r.download=`${a==="china"?"中国":"美国"}-蹭饭地图-${x}.png`,r.href=e,r.click()}catch(e){console.error(e),alert("导出失败，请重试")}finally{Q(!1)}}},[a,Ft]);return s.useEffect(()=>(window.__mealMapExport=Ft,()=>{delete window.__mealMapExport}),[Ft]),$?t.jsx("div",{className:"flex items-center justify-center h-full","data-matrix-id":"src/components/InteractiveMap.tsx:1190:6","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1190","data-component-file":"InteractiveMap.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20h-full%22%7D",children:t.jsxs("div",{className:"text-center","data-matrix-id":"src/components/InteractiveMap.tsx:1191:8","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1191","data-component-file":"InteractiveMap.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%22%7D",children:[t.jsx("div",{className:"inline-block w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin","data-matrix-id":"src/components/InteractiveMap.tsx:1192:10","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1192","data-component-file":"InteractiveMap.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22inline-block%20w-12%20h-12%20border-4%20border-primary-500%20border-t-transparent%20rounded-full%20animate-spin%22%7D"}),t.jsx("p",{className:"mt-4 text-body text-neutral-700","data-matrix-id":"src/components/InteractiveMap.tsx:1193:10","data-matrix-name":"p","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1193","data-component-file":"InteractiveMap.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22mt-4%20text-body%20text-neutral-700%22%7D",children:"加载地图中..."})]})}):t.jsxs("div",{ref:tt,"data-map-container":!0,className:"relative w-full h-full overflow-hidden bg-neutral-50",style:{backgroundColor:K.canvasBackgroundColor},"data-matrix-id":"src/components/InteractiveMap.tsx:1200:4","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1200","data-component-file":"InteractiveMap.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%20w-full%20h-full%20overflow-hidden%20bg-neutral-50%22%2C%22style%22%3A%7B%22backgroundColor%22%3A%22%5BMemberExpression%5D%22%7D%7D",children:[t.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-8",style:{zIndex:10},"data-matrix-id":"src/components/InteractiveMap.tsx:1207:6","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1207","data-component-file":"InteractiveMap.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20inset-0%20flex%20items-center%20justify-center%20p-8%22%2C%22style%22%3A%7B%22zIndex%22%3A10%7D%7D",children:t.jsx("div",{ref:lt,"data-export":"true","data-export-scale-layer":!0,className:"w-full h-full transition-transform duration-300",style:{transform:`scale(${k})`},"data-matrix-id":"src/components/InteractiveMap.tsx:1208:8","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1208","data-component-file":"InteractiveMap.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-full%20h-full%20transition-transform%20duration-300%22%2C%22style%22%3A%7B%22transform%22%3A%22%5BTemplateLiteral%5D%22%7D%7D",children:b&&t.jsx("svg",{ref:wt,className:"w-full h-full",viewBox:`0 0 ${P.width||1200} ${P.height||900}`,preserveAspectRatio:"xMidYMid meet",dangerouslySetInnerHTML:{__html:`
                  ${b.replace(/<\/?svg[^>]*>/g,"")}
                `},"data-matrix-id":"src/components/InteractiveMap.tsx:1216:12","data-matrix-name":"svg","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1216","data-component-file":"InteractiveMap.tsx","data-component-name":"svg","data-component-content":"%7B%22className%22%3A%22w-full%20h-full%22%2C%22viewBox%22%3A%22%5BTemplateLiteral%5D%22%2C%22preserveAspectRatio%22%3A%22xMidYMid%20meet%22%2C%22dangerouslySetInnerHTML%22%3A%7B%22__html%22%3A%22%5BTemplateLiteral%5D%22%7D%7D"})})}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-8 pointer-events-none",style:{zIndex:20},"data-matrix-id":"src/components/InteractiveMap.tsx:1232:6","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1232","data-component-file":"InteractiveMap.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20inset-0%20flex%20items-center%20justify-center%20p-8%20pointer-events-none%22%2C%22style%22%3A%7B%22zIndex%22%3A20%7D%7D",children:t.jsx("div",{ref:ot,className:"w-full h-full transition-transform duration-300","data-export-scale-layer":!0,style:{transform:`scale(${k})`,pointerEvents:"none"},"data-matrix-id":"src/components/InteractiveMap.tsx:1233:8","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1233","data-component-file":"InteractiveMap.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-full%20h-full%20transition-transform%20duration-300%22%2C%22style%22%3A%7B%22transform%22%3A%22%5BTemplateLiteral%5D%22%2C%22pointerEvents%22%3A%22none%22%7D%7D",children:t.jsx("svg",{ref:gt,className:"w-full h-full",viewBox:`0 0 ${P.width||1200} ${P.height||900}`,preserveAspectRatio:"xMidYMid meet",style:{pointerEvents:"none"},"data-matrix-id":"src/components/InteractiveMap.tsx:1239:10","data-matrix-name":"svg","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1239","data-component-file":"InteractiveMap.tsx","data-component-name":"svg","data-component-content":"%7B%22className%22%3A%22w-full%20h-full%22%2C%22viewBox%22%3A%22%5BTemplateLiteral%5D%22%2C%22preserveAspectRatio%22%3A%22xMidYMid%20meet%22%2C%22style%22%3A%7B%22pointerEvents%22%3A%22none%22%7D%7D",children:Object.entries(ht).map(([e,r])=>{var d;const x=Et(e),h=((d=xt.find(l=>l.value===x))==null?void 0:d.hex)||x;return t.jsxs("g",{"data-region-line-id":e,style:{pointerEvents:"none"},children:[t.jsx("line",{x1:r.start.x,y1:r.start.y,x2:r.end.x,y2:r.end.y,stroke:h,strokeWidth:3,strokeLinecap:"butt",pointerEvents:"none"}),t.jsx("circle",{cx:r.start.x,cy:r.start.y,r:3.5,fill:h,pointerEvents:"none"}),t.jsx("circle",{cx:r.end.x,cy:r.end.y,r:4,fill:h,pointerEvents:"none"})]},e)})})})}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-8 overflow-visible",style:{zIndex:30,pointerEvents:"none"},"data-matrix-id":"src/components/InteractiveMap.tsx:1271:6","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1271","data-component-file":"InteractiveMap.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20inset-0%20flex%20items-center%20justify-center%20p-8%20overflow-visible%22%2C%22style%22%3A%7B%22zIndex%22%3A30%2C%22pointerEvents%22%3A%22none%22%7D%7D",children:t.jsx("div",{className:"w-full h-full pointer-events-none transition-transform duration-300","data-export-scale-layer":!0,style:{transform:`scale(${k})`},"data-matrix-id":"src/components/InteractiveMap.tsx:1272:8","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1272","data-component-file":"InteractiveMap.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-full%20h-full%20pointer-events-none%20transition-transform%20duration-300%22%2C%22style%22%3A%7B%22transform%22%3A%22%5BTemplateLiteral%5D%22%7D%7D",children:Object.entries(Z).map(([e,r])=>{const x=n.find(i=>i.id===e);if(!x)return null;const h=W[e];if(!h)return null;const d=Ht.current[e],l=Y[e]||{x:0,y:0},u=d||l,N=h.x+u.x,D=h.y+u.y;return t.jsx("div",{ref:i=>ea.current.set(e,i),"data-card-id":e,className:"absolute pointer-events-auto transition-all duration-300",style:{left:`${N}%`,top:`${D}%`,transform:"translate(-50%, -50%)",zIndex:31},"data-matrix-id":"src/components/InteractiveMap.tsx:1299:12","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1299","data-component-file":"InteractiveMap.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20pointer-events-auto%20transition-all%20duration-300%22%2C%22style%22%3A%7B%22left%22%3A%22%5BTemplateLiteral%5D%22%2C%22top%22%3A%22%5BTemplateLiteral%5D%22%2C%22transform%22%3A%22translate(-50%25%2C%20-50%25)%22%2C%22zIndex%22%3A31%7D%7D",children:r.length>=4?t.jsx("div",{"data-inner-card":"true","data-matrix-id":"src/components/InteractiveMap.tsx:1312:16","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1312","data-component-file":"InteractiveMap.tsx","data-component-name":"div",children:t.jsx(Ja,{count:r.length,onClick:()=>B(x,r),"data-matrix-id":"src/components/InteractiveMap.tsx:1313:18","data-matrix-name":"AggregatedCard","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1313","data-component-file":"InteractiveMap.tsx","data-component-name":"AggregatedCard","data-component-content":"%7B%22count%22%3A%22%5BMemberExpression%5D%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%7D"})}):t.jsx("div",{"data-inner-card":"true","data-matrix-id":"src/components/InteractiveMap.tsx:1319:16","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1319","data-component-file":"InteractiveMap.tsx","data-component-name":"div",children:t.jsx(Va,{students:r,regionName:x.name,position:h,onEdit:c,onDelete:g,onDrag:(i,w)=>la(e,i,w),"data-matrix-id":"src/components/InteractiveMap.tsx:1320:18","data-matrix-name":"DraggableStudentCard","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1320","data-component-file":"InteractiveMap.tsx","data-component-name":"DraggableStudentCard","data-component-content":"%7B%22students%22%3A%22%5BIdentifier%5D%22%2C%22regionName%22%3A%22%5BMemberExpression%5D%22%2C%22position%22%3A%22%5BIdentifier%5D%22%2C%22onEdit%22%3A%22%5BIdentifier%5D%22%2C%22onDelete%22%3A%22%5BIdentifier%5D%22%2C%22onDrag%22%3A%22%5BArrowFunctionExpression%5D%22%7D"})})},e)})})}),t.jsxs("div",{className:"absolute top-4 left-4 bg-white/95 backdrop-blur-sm rounded-lg shadow-lg p-3 max-w-xs pointer-events-auto z-40",style:{maxWidth:"200px"},"data-matrix-id":"src/components/InteractiveMap.tsx:1337:6","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1337","data-component-file":"InteractiveMap.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20top-4%20left-4%20bg-white%2F95%20backdrop-blur-sm%20rounded-lg%20shadow-lg%20p-3%20max-w-xs%20pointer-events-auto%20z-40%22%2C%22style%22%3A%7B%22maxWidth%22%3A%22200px%22%7D%7D",children:[t.jsxs("h3",{className:"font-semibold text-neutral-900 mb-2","data-matrix-id":"src/components/InteractiveMap.tsx:1338:8","data-matrix-name":"h3","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1338","data-component-file":"InteractiveMap.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22font-semibold%20text-neutral-900%20mb-2%22%7D",children:[a==="china"?"中国":"美国","地图"]}),t.jsxs("div",{className:"space-y-1 text-small text-neutral-700","data-matrix-id":"src/components/InteractiveMap.tsx:1341:8","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1341","data-component-file":"InteractiveMap.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-1%20text-small%20text-neutral-700%22%7D",children:[t.jsxs("p",{"data-matrix-id":"src/components/InteractiveMap.tsx:1342:10","data-matrix-name":"p","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1342","data-component-file":"InteractiveMap.tsx","data-component-name":"p",children:["已添加同学: ",o.length," 位"]}),t.jsxs("p",{"data-matrix-id":"src/components/InteractiveMap.tsx:1343:10","data-matrix-name":"p","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1343","data-component-file":"InteractiveMap.tsx","data-component-name":"p",children:["覆盖地区: ",Object.keys(Z).length," 个"]}),t.jsx("p",{className:"text-caption text-neutral-400 mt-2","data-matrix-id":"src/components/InteractiveMap.tsx:1344:10","data-matrix-name":"p","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1344","data-component-file":"InteractiveMap.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-caption%20text-neutral-400%20mt-2%22%7D",children:"点击地图区域添加或查看同学信息"})]})]}),t.jsxs("div",{"data-export-ignore":!0,className:"absolute bottom-6 right-6 flex flex-col gap-2 bg-white/95 backdrop-blur-sm rounded-lg shadow-lg p-2 pointer-events-auto z-40","data-matrix-id":"src/components/InteractiveMap.tsx:1349:6","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1349","data-component-file":"InteractiveMap.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20bottom-6%20right-6%20flex%20flex-col%20gap-2%20bg-white%2F95%20backdrop-blur-sm%20rounded-lg%20shadow-lg%20p-2%20pointer-events-auto%20z-40%22%7D",children:[t.jsx("button",{onClick:pa,className:"btn-icon",title:"放大","data-matrix-id":"src/components/InteractiveMap.tsx:1353:8","data-matrix-name":"button","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1353","data-component-file":"InteractiveMap.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22btn-icon%22%2C%22title%22%3A%22%E6%94%BE%E5%A4%A7%22%7D",children:t.jsx(ya,{className:"w-5 h-5","data-matrix-id":"src/components/InteractiveMap.tsx:1354:10","data-matrix-name":"ZoomIn","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1354","data-component-file":"InteractiveMap.tsx","data-component-name":"ZoomIn","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})}),t.jsx("button",{onClick:xa,className:"btn-icon",title:"缩小","data-matrix-id":"src/components/InteractiveMap.tsx:1356:8","data-matrix-name":"button","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1356","data-component-file":"InteractiveMap.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22btn-icon%22%2C%22title%22%3A%22%E7%BC%A9%E5%B0%8F%22%7D",children:t.jsx(wa,{className:"w-5 h-5","data-matrix-id":"src/components/InteractiveMap.tsx:1357:10","data-matrix-name":"ZoomOut","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1357","data-component-file":"InteractiveMap.tsx","data-component-name":"ZoomOut","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})}),t.jsx("button",{onClick:ua,className:"btn-icon",title:"重置","data-matrix-id":"src/components/InteractiveMap.tsx:1359:8","data-matrix-name":"button","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1359","data-component-file":"InteractiveMap.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22btn-icon%22%2C%22title%22%3A%22%E9%87%8D%E7%BD%AE%22%7D",children:t.jsx(Ba,{className:"w-5 h-5","data-matrix-id":"src/components/InteractiveMap.tsx:1360:10","data-matrix-name":"Maximize2","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1360","data-component-file":"InteractiveMap.tsx","data-component-name":"Maximize2","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})}),t.jsx("div",{className:"w-full h-px bg-neutral-200 my-1","data-matrix-id":"src/components/InteractiveMap.tsx:1362:8","data-matrix-name":"div","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1362","data-component-file":"InteractiveMap.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-full%20h-px%20bg-neutral-200%20my-1%22%7D"}),t.jsx("button",{onClick:ha,className:"btn-icon",title:V?"正在导出...":"导出图片",disabled:V,"data-matrix-id":"src/components/InteractiveMap.tsx:1363:8","data-matrix-name":"button","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1363","data-component-file":"InteractiveMap.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22btn-icon%22%2C%22title%22%3A%22%5BConditionalExpression%5D%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%7D",children:V?t.jsx(Da,{className:"w-5 h-5 animate-spin","data-matrix-id":"src/components/InteractiveMap.tsx:1370:12","data-matrix-name":"Loader2","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1370","data-component-file":"InteractiveMap.tsx","data-component-name":"Loader2","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20animate-spin%22%7D"}):t.jsx(Ot,{className:"w-5 h-5","data-matrix-id":"src/components/InteractiveMap.tsx:1372:10","data-matrix-name":"Download","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1372","data-component-file":"InteractiveMap.tsx","data-component-name":"Download","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})})]}),t.jsx("style",{"data-matrix-id":"src/components/InteractiveMap.tsx:1378:6","data-matrix-name":"style","data-component-path":"src/components/InteractiveMap.tsx","data-component-line":"1378","data-component-file":"InteractiveMap.tsx","data-component-name":"style",children:`
        svg {
          pointer-events: auto;
        }
        
        .region-path,
        path[data-region-id] {
          /* 不设置默认fill，让动态填充颜色生效 */
          stroke: #E5E5E5;
          stroke-width: 1;
          cursor: pointer;
          pointer-events: auto;
          transition: all 200ms ease-out;
        }
        
        /* 已有填充颜色的区域hover时保持原色，只改变描边 */
        .region-path[fill]:hover,
        path[data-region-id][fill]:hover {
          stroke: #0066FF !important;
          stroke-width: 2.5 !important;
          /* 移除filter，保持原有填充颜色 */
        }
        
        /* 未填充区域hover时显示浅蓝色 */
        .region-path:not([fill]):hover,
        path[data-region-id]:not([fill]):hover {
          fill: #E6F0FF !important;
          stroke: #0066FF !important;
          stroke-width: 2 !important;
        }
        
        ${E?`
          .region-path[data-region-id="${E}"],
          path[data-region-id="${E}"] {
            fill: #E6F0FF !important;
            stroke: #0066FF !important;
            stroke-width: 2 !important;
          }
        `:""}
      `})]})}function te({isOpen:a,onClose:n,onSave:o,student:f,regionName:c,regionId:g,country:B}){const[C,b]=s.useState({name:"",city:""}),[j,$]=s.useState(!1),[R,V]=s.useState({});s.useEffect(()=>{b(f?{name:f.name,city:f.city||""}:{name:"",city:""}),V({})},[f,a]);const Q=()=>{const p={};return C.name.trim()||(p.name="请输入同学姓名"),C.city.trim()||(p.city="请输入具体城市"),V(p),Object.keys(p).length===0},E=async p=>{if(p.preventDefault(),!!Q()){$(!0);try{await o({...C,region_id:g,region_name:c,country:B}),n()}catch(k){console.error("保存失败:",k),alert("保存失败，请重试")}finally{$(!1)}}};return a?t.jsx("div",{className:"modal-overlay",onClick:n,"data-matrix-id":"src/components/StudentModal.tsx:84:4","data-matrix-name":"div","data-component-path":"src/components/StudentModal.tsx","data-component-line":"84","data-component-file":"StudentModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22modal-overlay%22%2C%22onClick%22%3A%22%5BIdentifier%5D%22%7D",children:t.jsxs("div",{className:"modal-content max-w-md w-full mx-4",onClick:p=>p.stopPropagation(),"data-matrix-id":"src/components/StudentModal.tsx:85:6","data-matrix-name":"div","data-component-path":"src/components/StudentModal.tsx","data-component-line":"85","data-component-file":"StudentModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22modal-content%20max-w-md%20w-full%20mx-4%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:[t.jsxs("div",{className:"flex items-center justify-between pb-6 border-b border-neutral-200","data-matrix-id":"src/components/StudentModal.tsx:90:8","data-matrix-name":"div","data-component-path":"src/components/StudentModal.tsx","data-component-line":"90","data-component-file":"StudentModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20pb-6%20border-b%20border-neutral-200%22%7D",children:[t.jsxs("div",{"data-matrix-id":"src/components/StudentModal.tsx:91:10","data-matrix-name":"div","data-component-path":"src/components/StudentModal.tsx","data-component-line":"91","data-component-file":"StudentModal.tsx","data-component-name":"div",children:[t.jsx("h2",{className:"text-h2 font-semibold text-neutral-900","data-matrix-id":"src/components/StudentModal.tsx:92:12","data-matrix-name":"h2","data-component-path":"src/components/StudentModal.tsx","data-component-line":"92","data-component-file":"StudentModal.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-h2%20font-semibold%20text-neutral-900%22%7D",children:f?"编辑同学信息":"添加同学信息"}),t.jsx("p",{className:"text-small text-neutral-700 mt-1","data-matrix-id":"src/components/StudentModal.tsx:95:12","data-matrix-name":"p","data-component-path":"src/components/StudentModal.tsx","data-component-line":"95","data-component-file":"StudentModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-small%20text-neutral-700%20mt-1%22%7D",children:c})]}),t.jsx("button",{onClick:n,className:"btn-icon","data-matrix-id":"src/components/StudentModal.tsx:97:10","data-matrix-name":"button","data-component-path":"src/components/StudentModal.tsx","data-component-line":"97","data-component-file":"StudentModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22btn-icon%22%7D",children:t.jsx(Rt,{className:"w-5 h-5","data-matrix-id":"src/components/StudentModal.tsx:98:12","data-matrix-name":"X","data-component-path":"src/components/StudentModal.tsx","data-component-line":"98","data-component-file":"StudentModal.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})})]}),t.jsxs("form",{onSubmit:E,className:"mt-6 space-y-6","data-matrix-id":"src/components/StudentModal.tsx:103:8","data-matrix-name":"form","data-component-path":"src/components/StudentModal.tsx","data-component-line":"103","data-component-file":"StudentModal.tsx","data-component-name":"form","data-component-content":"%7B%22onSubmit%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22mt-6%20space-y-6%22%7D",children:[t.jsxs("div",{"data-matrix-id":"src/components/StudentModal.tsx:105:10","data-matrix-name":"div","data-component-path":"src/components/StudentModal.tsx","data-component-line":"105","data-component-file":"StudentModal.tsx","data-component-name":"div",children:[t.jsxs("label",{htmlFor:"name",className:"block text-small font-medium text-neutral-700 mb-2","data-matrix-id":"src/components/StudentModal.tsx:106:12","data-matrix-name":"label","data-component-path":"src/components/StudentModal.tsx","data-component-line":"106","data-component-file":"StudentModal.tsx","data-component-name":"label","data-component-content":"%7B%22htmlFor%22%3A%22name%22%2C%22className%22%3A%22block%20text-small%20font-medium%20text-neutral-700%20mb-2%22%7D",children:["姓名 ",t.jsx("span",{className:"text-error","data-matrix-id":"src/components/StudentModal.tsx:107:17","data-matrix-name":"span","data-component-path":"src/components/StudentModal.tsx","data-component-line":"107","data-component-file":"StudentModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-error%22%7D",children:"*"})]}),t.jsx("input",{id:"name",type:"text",className:`input ${R.name?"border-error":""}`,placeholder:"请输入同学姓名",value:C.name,onChange:p=>b({...C,name:p.target.value}),"data-matrix-id":"src/components/StudentModal.tsx:109:12","data-matrix-name":"input","data-component-path":"src/components/StudentModal.tsx","data-component-line":"109","data-component-file":"StudentModal.tsx","data-component-name":"input","data-component-content":"%7B%22id%22%3A%22name%22%2C%22type%22%3A%22text%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22placeholder%22%3A%22%E8%AF%B7%E8%BE%93%E5%85%A5%E5%90%8C%E5%AD%A6%E5%A7%93%E5%90%8D%22%2C%22value%22%3A%22%5BMemberExpression%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%7D"}),R.name&&t.jsx("p",{className:"text-caption text-error mt-1","data-matrix-id":"src/components/StudentModal.tsx:118:14","data-matrix-name":"p","data-component-path":"src/components/StudentModal.tsx","data-component-line":"118","data-component-file":"StudentModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-caption%20text-error%20mt-1%22%7D",children:R.name})]}),t.jsxs("div",{"data-matrix-id":"src/components/StudentModal.tsx:123:10","data-matrix-name":"div","data-component-path":"src/components/StudentModal.tsx","data-component-line":"123","data-component-file":"StudentModal.tsx","data-component-name":"div",children:[t.jsxs("label",{htmlFor:"city",className:"block text-small font-medium text-neutral-700 mb-2","data-matrix-id":"src/components/StudentModal.tsx:124:12","data-matrix-name":"label","data-component-path":"src/components/StudentModal.tsx","data-component-line":"124","data-component-file":"StudentModal.tsx","data-component-name":"label","data-component-content":"%7B%22htmlFor%22%3A%22city%22%2C%22className%22%3A%22block%20text-small%20font-medium%20text-neutral-700%20mb-2%22%7D",children:["具体城市 ",t.jsx("span",{className:"text-error","data-matrix-id":"src/components/StudentModal.tsx:125:19","data-matrix-name":"span","data-component-path":"src/components/StudentModal.tsx","data-component-line":"125","data-component-file":"StudentModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-error%22%7D",children:"*"})]}),t.jsx("input",{id:"city",type:"text",className:`input ${R.city?"border-error":""}`,placeholder:"请输入具体城市名称",value:C.city,onChange:p=>b({...C,city:p.target.value}),"data-matrix-id":"src/components/StudentModal.tsx:127:12","data-matrix-name":"input","data-component-path":"src/components/StudentModal.tsx","data-component-line":"127","data-component-file":"StudentModal.tsx","data-component-name":"input","data-component-content":"%7B%22id%22%3A%22city%22%2C%22type%22%3A%22text%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22placeholder%22%3A%22%E8%AF%B7%E8%BE%93%E5%85%A5%E5%85%B7%E4%BD%93%E5%9F%8E%E5%B8%82%E5%90%8D%E7%A7%B0%22%2C%22value%22%3A%22%5BMemberExpression%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%7D"}),R.city&&t.jsx("p",{className:"text-caption text-error mt-1","data-matrix-id":"src/components/StudentModal.tsx:136:14","data-matrix-name":"p","data-component-path":"src/components/StudentModal.tsx","data-component-line":"136","data-component-file":"StudentModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-caption%20text-error%20mt-1%22%7D",children:R.city})]}),t.jsx("div",{className:"text-caption text-neutral-500 bg-neutral-50 p-3 rounded","data-matrix-id":"src/components/StudentModal.tsx:141:10","data-matrix-name":"div","data-component-path":"src/components/StudentModal.tsx","data-component-line":"141","data-component-file":"StudentModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-caption%20text-neutral-500%20bg-neutral-50%20p-3%20rounded%22%7D",children:"提示：同一省/州的所有同学将使用相同的卡片颜色"}),t.jsxs("div",{className:"flex gap-4 pt-6 border-t border-neutral-200","data-matrix-id":"src/components/StudentModal.tsx:146:10","data-matrix-name":"div","data-component-path":"src/components/StudentModal.tsx","data-component-line":"146","data-component-file":"StudentModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-4%20pt-6%20border-t%20border-neutral-200%22%7D",children:[t.jsx("button",{type:"button",onClick:n,className:"flex-1 btn-secondary",disabled:j,"data-matrix-id":"src/components/StudentModal.tsx:147:12","data-matrix-name":"button","data-component-path":"src/components/StudentModal.tsx","data-component-line":"147","data-component-file":"StudentModal.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22button%22%2C%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22flex-1%20btn-secondary%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%7D",children:"取消"}),t.jsx("button",{type:"submit",className:"flex-1 btn-primary",disabled:j,"data-matrix-id":"src/components/StudentModal.tsx:155:12","data-matrix-name":"button","data-component-path":"src/components/StudentModal.tsx","data-component-line":"155","data-component-file":"StudentModal.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22submit%22%2C%22className%22%3A%22flex-1%20btn-primary%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%7D",children:j?"保存中...":"保存"})]})]})]})}):null}function ae({isOpen:a,onClose:n,students:o,regionName:f,onEdit:c,onDelete:g,onAddNew:B}){return a?t.jsx("div",{className:"modal-overlay",onClick:n,"data-matrix-id":"src/components/StudentListModal.tsx:27:4","data-matrix-name":"div","data-component-path":"src/components/StudentListModal.tsx","data-component-line":"27","data-component-file":"StudentListModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22modal-overlay%22%2C%22onClick%22%3A%22%5BIdentifier%5D%22%7D",children:t.jsxs("div",{className:"modal-content max-w-2xl w-full mx-4 max-h-[80vh] flex flex-col",onClick:C=>C.stopPropagation(),"data-matrix-id":"src/components/StudentListModal.tsx:28:6","data-matrix-name":"div","data-component-path":"src/components/StudentListModal.tsx","data-component-line":"28","data-component-file":"StudentListModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22modal-content%20max-w-2xl%20w-full%20mx-4%20max-h-%5B80vh%5D%20flex%20flex-col%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:[t.jsxs("div",{className:"flex items-center justify-between pb-6 border-b border-neutral-200","data-matrix-id":"src/components/StudentListModal.tsx:33:8","data-matrix-name":"div","data-component-path":"src/components/StudentListModal.tsx","data-component-line":"33","data-component-file":"StudentListModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20pb-6%20border-b%20border-neutral-200%22%7D",children:[t.jsxs("div",{"data-matrix-id":"src/components/StudentListModal.tsx:34:10","data-matrix-name":"div","data-component-path":"src/components/StudentListModal.tsx","data-component-line":"34","data-component-file":"StudentListModal.tsx","data-component-name":"div",children:[t.jsx("h2",{className:"text-h2 font-semibold text-neutral-900","data-matrix-id":"src/components/StudentListModal.tsx:35:12","data-matrix-name":"h2","data-component-path":"src/components/StudentListModal.tsx","data-component-line":"35","data-component-file":"StudentListModal.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-h2%20font-semibold%20text-neutral-900%22%7D",children:f}),t.jsxs("p",{className:"text-small text-neutral-700 mt-1","data-matrix-id":"src/components/StudentListModal.tsx:36:12","data-matrix-name":"p","data-component-path":"src/components/StudentListModal.tsx","data-component-line":"36","data-component-file":"StudentListModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-small%20text-neutral-700%20mt-1%22%7D",children:["共 ",o.length," 位同学"]})]}),t.jsx("button",{onClick:n,className:"btn-icon","data-matrix-id":"src/components/StudentListModal.tsx:38:10","data-matrix-name":"button","data-component-path":"src/components/StudentListModal.tsx","data-component-line":"38","data-component-file":"StudentListModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22btn-icon%22%7D",children:t.jsx(Rt,{className:"w-5 h-5","data-matrix-id":"src/components/StudentListModal.tsx:39:12","data-matrix-name":"X","data-component-path":"src/components/StudentListModal.tsx","data-component-line":"39","data-component-file":"StudentListModal.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto mt-6 space-y-3 pr-2","data-matrix-id":"src/components/StudentListModal.tsx:44:8","data-matrix-name":"div","data-component-path":"src/components/StudentListModal.tsx","data-component-line":"44","data-component-file":"StudentListModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20overflow-y-auto%20mt-6%20space-y-3%20pr-2%22%7D",children:o.map(C=>t.jsx(Ga,{student:C,onEdit:c,onDelete:g,"data-matrix-id":"src/components/StudentListModal.tsx:46:12","data-matrix-name":"StudentCard","data-component-path":"src/components/StudentListModal.tsx","data-component-line":"46","data-component-file":"StudentListModal.tsx","data-component-name":"StudentCard","data-component-content":"%7B%22student%22%3A%22%5BIdentifier%5D%22%2C%22onEdit%22%3A%22%5BIdentifier%5D%22%2C%22onDelete%22%3A%22%5BIdentifier%5D%22%7D"},C.id))}),t.jsx("div",{className:"pt-6 border-t border-neutral-200 mt-6","data-matrix-id":"src/components/StudentListModal.tsx:56:8","data-matrix-name":"div","data-component-path":"src/components/StudentListModal.tsx","data-component-line":"56","data-component-file":"StudentListModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22pt-6%20border-t%20border-neutral-200%20mt-6%22%7D",children:t.jsxs("button",{onClick:B,className:"w-full btn-primary flex items-center justify-center gap-2","data-matrix-id":"src/components/StudentListModal.tsx:57:10","data-matrix-name":"button","data-component-path":"src/components/StudentListModal.tsx","data-component-line":"57","data-component-file":"StudentListModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-full%20btn-primary%20flex%20items-center%20justify-center%20gap-2%22%7D",children:[t.jsx(Sa,{className:"w-5 h-5","data-matrix-id":"src/components/StudentListModal.tsx:58:12","data-matrix-name":"Plus","data-component-path":"src/components/StudentListModal.tsx","data-component-line":"58","data-component-file":"StudentListModal.tsx","data-component-name":"Plus","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),t.jsx("span",{"data-matrix-id":"src/components/StudentListModal.tsx:59:12","data-matrix-name":"span","data-component-path":"src/components/StudentListModal.tsx","data-component-line":"59","data-component-file":"StudentListModal.tsx","data-component-name":"span",children:"添加更多同学"})]})})]})}):null}function ee({isOpen:a,onClose:n,mapElementId:o,studentCount:f,regionCount:c,mapsConfig:g,currentStudents:B=[],currentCountry:C="china"}){const[b,j]=s.useState("png"),[$,R]=s.useState(!1),V=jt(),Q=async()=>{try{R(!0);const E=new Date().toISOString().split("T")[0],p=C==="china"?"中国":"美国",k=b==="png"?"png":"jpeg";let z=null;if(window.__mealMapExport)z=await window.__mealMapExport({format:b});else{const J=document.getElementById(o);if(!J)throw new Error(`Map element not found: ${o}`);let Y;window.__mealMapPrepareExport?Y=await window.__mealMapPrepareExport():window.__mealMapForceLineRecalc&&(await window.__mealMapForceLineRecalc(),await new Promise(nt=>requestAnimationFrame(()=>requestAnimationFrame(nt))));const ut=await sa(J,{backgroundColor:V.canvasBackgroundColor||"#f5f5f5",scale:window.devicePixelRatio*2,logging:!1,useCORS:!0,onclone:nt=>{nt.querySelectorAll("[data-export-ignore]").forEach(it=>it.remove())}}),P=b==="jpeg"?"image/jpeg":"image/png";z=ut.toDataURL(P),Y==null||Y()}if(!z)throw new Error("生成导出图片失败");const W=document.createElement("a");W.href=z,W.download=`${p}地图-${E}.${k}`,W.click(),n()}catch(E){console.error("Export failed:",E),alert(`导出失败: ${E instanceof Error?E.message:String(E)}`)}finally{R(!1)}};return a?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50","data-matrix-id":"src/components/ExportModal.tsx:109:4","data-matrix-name":"div","data-component-path":"src/components/ExportModal.tsx","data-component-line":"109","data-component-file":"ExportModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20inset-0%20bg-black%20bg-opacity-50%20flex%20items-center%20justify-center%20z-50%22%7D",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-96 max-w-90vw","data-matrix-id":"src/components/ExportModal.tsx:110:6","data-matrix-name":"div","data-component-path":"src/components/ExportModal.tsx","data-component-line":"110","data-component-file":"ExportModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20rounded-lg%20shadow-xl%20w-96%20max-w-90vw%22%7D",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b","data-matrix-id":"src/components/ExportModal.tsx:111:8","data-matrix-name":"div","data-component-path":"src/components/ExportModal.tsx","data-component-line":"111","data-component-file":"ExportModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20p-4%20border-b%22%7D",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900","data-matrix-id":"src/components/ExportModal.tsx:112:10","data-matrix-name":"h2","data-component-path":"src/components/ExportModal.tsx","data-component-line":"112","data-component-file":"ExportModal.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-lg%20font-semibold%20text-gray-900%22%7D",children:"导出地图"}),t.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",disabled:$,"data-matrix-id":"src/components/ExportModal.tsx:113:10","data-matrix-name":"button","data-component-path":"src/components/ExportModal.tsx","data-component-line":"113","data-component-file":"ExportModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22text-gray-400%20hover%3Atext-gray-600%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%7D",children:t.jsx(Rt,{size:20,"data-matrix-id":"src/components/ExportModal.tsx:118:12","data-matrix-name":"X","data-component-path":"src/components/ExportModal.tsx","data-component-line":"118","data-component-file":"ExportModal.tsx","data-component-name":"X","data-component-content":"%7B%22size%22%3A20%7D"})})]}),t.jsxs("div",{className:"p-4 space-y-4","data-matrix-id":"src/components/ExportModal.tsx:122:8","data-matrix-name":"div","data-component-path":"src/components/ExportModal.tsx","data-component-line":"122","data-component-file":"ExportModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-4%20space-y-4%22%7D",children:[t.jsx("div",{className:"bg-gray-50 rounded-md p-3","data-matrix-id":"src/components/ExportModal.tsx:123:10","data-matrix-name":"div","data-component-path":"src/components/ExportModal.tsx","data-component-line":"123","data-component-file":"ExportModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gray-50%20rounded-md%20p-3%22%7D",children:t.jsxs("div",{className:"text-sm space-y-1","data-matrix-id":"src/components/ExportModal.tsx:124:12","data-matrix-name":"div","data-component-path":"src/components/ExportModal.tsx","data-component-line":"124","data-component-file":"ExportModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-sm%20space-y-1%22%7D",children:[t.jsxs("p",{"data-matrix-id":"src/components/ExportModal.tsx:125:14","data-matrix-name":"p","data-component-path":"src/components/ExportModal.tsx","data-component-line":"125","data-component-file":"ExportModal.tsx","data-component-name":"p",children:[t.jsx("span",{className:"font-medium","data-matrix-id":"src/components/ExportModal.tsx:126:16","data-matrix-name":"span","data-component-path":"src/components/ExportModal.tsx","data-component-line":"126","data-component-file":"ExportModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-medium%22%7D",children:"当前地图："}),C==="china"?"中国地图":"美国地图"]}),t.jsxs("p",{"data-matrix-id":"src/components/ExportModal.tsx:129:14","data-matrix-name":"p","data-component-path":"src/components/ExportModal.tsx","data-component-line":"129","data-component-file":"ExportModal.tsx","data-component-name":"p",children:[t.jsx("span",{className:"font-medium","data-matrix-id":"src/components/ExportModal.tsx:130:16","data-matrix-name":"span","data-component-path":"src/components/ExportModal.tsx","data-component-line":"130","data-component-file":"ExportModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-medium%22%7D",children:"已添加同学："}),f," 位"]}),t.jsxs("p",{"data-matrix-id":"src/components/ExportModal.tsx:133:14","data-matrix-name":"p","data-component-path":"src/components/ExportModal.tsx","data-component-line":"133","data-component-file":"ExportModal.tsx","data-component-name":"p",children:[t.jsx("span",{className:"font-medium","data-matrix-id":"src/components/ExportModal.tsx:134:16","data-matrix-name":"span","data-component-path":"src/components/ExportModal.tsx","data-component-line":"134","data-component-file":"ExportModal.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-medium%22%7D",children:"覆盖地区："}),c," 个"]})]})}),t.jsxs("div",{"data-matrix-id":"src/components/ExportModal.tsx:140:10","data-matrix-name":"div","data-component-path":"src/components/ExportModal.tsx","data-component-line":"140","data-component-file":"ExportModal.tsx","data-component-name":"div",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2","data-matrix-id":"src/components/ExportModal.tsx:141:12","data-matrix-name":"label","data-component-path":"src/components/ExportModal.tsx","data-component-line":"141","data-component-file":"ExportModal.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-700%20mb-2%22%7D",children:"选择导出格式"}),t.jsxs("div",{className:"flex space-x-4","data-matrix-id":"src/components/ExportModal.tsx:144:12","data-matrix-name":"div","data-component-path":"src/components/ExportModal.tsx","data-component-line":"144","data-component-file":"ExportModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20space-x-4%22%7D",children:[t.jsxs("label",{className:"flex items-center","data-matrix-id":"src/components/ExportModal.tsx:145:14","data-matrix-name":"label","data-component-path":"src/components/ExportModal.tsx","data-component-line":"145","data-component-file":"ExportModal.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22flex%20items-center%22%7D",children:[t.jsx("input",{type:"radio",value:"png",checked:b==="png",onChange:E=>j(E.target.value),className:"mr-2","data-matrix-id":"src/components/ExportModal.tsx:146:16","data-matrix-name":"input","data-component-path":"src/components/ExportModal.tsx","data-component-line":"146","data-component-file":"ExportModal.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22radio%22%2C%22value%22%3A%22png%22%2C%22checked%22%3A%22%5BBinaryExpression%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22mr-2%22%7D"}),"PNG (推荐)"]}),t.jsxs("label",{className:"flex items-center","data-matrix-id":"src/components/ExportModal.tsx:155:14","data-matrix-name":"label","data-component-path":"src/components/ExportModal.tsx","data-component-line":"155","data-component-file":"ExportModal.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22flex%20items-center%22%7D",children:[t.jsx("input",{type:"radio",value:"jpeg",checked:b==="jpeg",onChange:E=>j(E.target.value),className:"mr-2","data-matrix-id":"src/components/ExportModal.tsx:156:16","data-matrix-name":"input","data-component-path":"src/components/ExportModal.tsx","data-component-line":"156","data-component-file":"ExportModal.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22radio%22%2C%22value%22%3A%22jpeg%22%2C%22checked%22%3A%22%5BBinaryExpression%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22mr-2%22%7D"}),"JPEG"]})]})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3","data-matrix-id":"src/components/ExportModal.tsx:168:10","data-matrix-name":"div","data-component-path":"src/components/ExportModal.tsx","data-component-line":"168","data-component-file":"ExportModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-blue-50%20border%20border-blue-200%20rounded-md%20p-3%22%7D",children:t.jsxs("p",{className:"text-sm text-blue-800","data-matrix-id":"src/components/ExportModal.tsx:169:12","data-matrix-name":"p","data-component-path":"src/components/ExportModal.tsx","data-component-line":"169","data-component-file":"ExportModal.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-blue-800%22%7D",children:[t.jsx("strong",{"data-matrix-id":"src/components/ExportModal.tsx:170:14","data-matrix-name":"strong","data-component-path":"src/components/ExportModal.tsx","data-component-line":"170","data-component-file":"ExportModal.tsx","data-component-name":"strong",children:"导出说明："}),t.jsx("br",{"data-matrix-id":"src/components/ExportModal.tsx:171:14","data-matrix-name":"br","data-component-path":"src/components/ExportModal.tsx","data-component-line":"171","data-component-file":"ExportModal.tsx","data-component-name":"br"}),"• 导出将截取当前地图视图。",t.jsx("br",{"data-matrix-id":"src/components/ExportModal.tsx:173:14","data-matrix-name":"br","data-component-path":"src/components/ExportModal.tsx","data-component-line":"173","data-component-file":"ExportModal.tsx","data-component-name":"br"}),"• 学生信息将按所见显示。",t.jsx("br",{"data-matrix-id":"src/components/ExportModal.tsx:175:14","data-matrix-name":"br","data-component-path":"src/components/ExportModal.tsx","data-component-line":"175","data-component-file":"ExportModal.tsx","data-component-name":"br"}),"• 确保在导出前所有卡片都可见。"]})})]}),t.jsxs("div",{className:"flex space-x-3 p-4 border-t","data-matrix-id":"src/components/ExportModal.tsx:181:8","data-matrix-name":"div","data-component-path":"src/components/ExportModal.tsx","data-component-line":"181","data-component-file":"ExportModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20space-x-3%20p-4%20border-t%22%7D",children:[t.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:$,"data-matrix-id":"src/components/ExportModal.tsx:182:10","data-matrix-name":"button","data-component-path":"src/components/ExportModal.tsx","data-component-line":"182","data-component-file":"ExportModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22flex-1%20px-4%20py-2%20border%20border-gray-300%20rounded-md%20text-gray-700%20hover%3Abg-gray-50%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%7D",children:"取消"}),t.jsx("button",{onClick:Q,disabled:$,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center","data-matrix-id":"src/components/ExportModal.tsx:189:10","data-matrix-name":"button","data-component-path":"src/components/ExportModal.tsx","data-component-line":"189","data-component-file":"ExportModal.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22flex-1%20px-4%20py-2%20bg-blue-600%20text-white%20rounded-md%20hover%3Abg-blue-700%20disabled%3Aopacity-50%20flex%20items-center%20justify-center%22%7D",children:$?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white","data-matrix-id":"src/components/ExportModal.tsx:195:14","data-matrix-name":"div","data-component-path":"src/components/ExportModal.tsx","data-component-line":"195","data-component-file":"ExportModal.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22animate-spin%20rounded-full%20h-4%20w-4%20border-b-2%20border-white%22%7D"}):t.jsxs(t.Fragment,{children:[t.jsx(Ot,{size:16,className:"mr-2","data-matrix-id":"src/components/ExportModal.tsx:198:16","data-matrix-name":"Download","data-component-path":"src/components/ExportModal.tsx","data-component-line":"198","data-component-file":"ExportModal.tsx","data-component-name":"Download","data-component-content":"%7B%22size%22%3A16%2C%22className%22%3A%22mr-2%22%7D"}),"导出地图"]})})]})]})}):null}const ne="#3b82f6";function oe({currentColor:a,onColorSelect:n,onReset:o,regionName:f}){const c=b=>b?b.startsWith("#")?b:Nt(b).hex:ne,[g,B]=s.useState(c(a));s.useEffect(()=>{B(c(a))},[a]);const C=b=>{const j=b.target.value;B(j),n(j)};return t.jsxs("div",{className:"space-y-4","data-matrix-id":"src/components/ColorPicker.tsx:39:4","data-matrix-name":"div","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"39","data-component-file":"ColorPicker.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:[t.jsxs("div",{className:"flex items-center gap-2","data-matrix-id":"src/components/ColorPicker.tsx:40:6","data-matrix-name":"div","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"40","data-component-file":"ColorPicker.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[t.jsx(St,{className:"w-5 h-5 text-primary-500","data-matrix-id":"src/components/ColorPicker.tsx:41:8","data-matrix-name":"Palette","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"41","data-component-file":"ColorPicker.tsx","data-component-name":"Palette","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-primary-500%22%7D"}),t.jsx("h3",{className:"text-lg font-semibold text-neutral-900","data-matrix-id":"src/components/ColorPicker.tsx:42:8","data-matrix-name":"h3","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"42","data-component-file":"ColorPicker.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-lg%20font-semibold%20text-neutral-900%22%7D",children:f?`${f} 颜色设置`:"选择卡片颜色"})]}),t.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200","data-matrix-id":"src/components/ColorPicker.tsx:47:6","data-matrix-name":"div","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"47","data-component-file":"ColorPicker.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gradient-to-r%20from-purple-50%20to-pink-50%20rounded-lg%20p-4%20border%20border-purple-200%22%7D",children:[t.jsxs("button",{onClick:()=>{var b;return(b=document.getElementById("region-custom-color-input"))==null?void 0:b.click()},className:"flex items-center gap-3 text-left w-full mb-3","data-matrix-id":"src/components/ColorPicker.tsx:48:8","data-matrix-name":"button","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"48","data-component-file":"ColorPicker.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22flex%20items-center%20gap-3%20text-left%20w-full%20mb-3%22%7D",children:[t.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:Nt(a||g).hex},"data-matrix-id":"src/components/ColorPicker.tsx:52:10","data-matrix-name":"div","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"52","data-component-file":"ColorPicker.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20rounded-full%20border-2%20border-white%20shadow-sm%22%2C%22style%22%3A%7B%22backgroundColor%22%3A%22%5BMemberExpression%5D%22%7D%7D"}),t.jsxs("div",{"data-matrix-id":"src/components/ColorPicker.tsx:56:10","data-matrix-name":"div","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"56","data-component-file":"ColorPicker.tsx","data-component-name":"div",children:[t.jsx("p",{className:"text-sm font-medium text-purple-800","data-matrix-id":"src/components/ColorPicker.tsx:57:12","data-matrix-name":"p","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"57","data-component-file":"ColorPicker.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20font-medium%20text-purple-800%22%7D",children:"当前颜色"}),t.jsxs("p",{className:"text-xs text-purple-600","data-matrix-id":"src/components/ColorPicker.tsx:58:12","data-matrix-name":"p","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"58","data-component-file":"ColorPicker.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-purple-600%22%7D",children:[Nt(a||g).name||"自定义颜色"," · 点击修改"]})]})]}),t.jsxs("div",{className:"flex items-center gap-3","data-matrix-id":"src/components/ColorPicker.tsx:62:8","data-matrix-name":"div","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"62","data-component-file":"ColorPicker.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%22%7D",children:[t.jsx("input",{id:"region-custom-color-input",type:"color",value:g,onChange:C,className:"w-12 h-10 rounded border-2 border-white shadow-sm cursor-pointer",title:"选择自定义颜色","data-matrix-id":"src/components/ColorPicker.tsx:63:10","data-matrix-name":"input","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"63","data-component-file":"ColorPicker.tsx","data-component-name":"input","data-component-content":"%7B%22id%22%3A%22region-custom-color-input%22%2C%22type%22%3A%22color%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-12%20h-10%20rounded%20border-2%20border-white%20shadow-sm%20cursor-pointer%22%2C%22title%22%3A%22%E9%80%89%E6%8B%A9%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A2%9C%E8%89%B2%22%7D"}),t.jsxs("div",{className:"flex-1","data-matrix-id":"src/components/ColorPicker.tsx:71:10","data-matrix-name":"div","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"71","data-component-file":"ColorPicker.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%22%7D",children:[t.jsx("p",{className:"text-xs text-purple-700","data-matrix-id":"src/components/ColorPicker.tsx:72:12","data-matrix-name":"p","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"72","data-component-file":"ColorPicker.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-purple-700%22%7D",children:"通过颜色选择器选择任意颜色，自动应用"}),t.jsxs("p",{className:"text-xs text-purple-600 mt-1","data-matrix-id":"src/components/ColorPicker.tsx:75:12","data-matrix-name":"p","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"75","data-component-file":"ColorPicker.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-purple-600%20mt-1%22%7D",children:["当前：",g]})]})]})]}),t.jsxs("div",{"data-matrix-id":"src/components/ColorPicker.tsx:80:6","data-matrix-name":"div","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"80","data-component-file":"ColorPicker.tsx","data-component-name":"div",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3","data-matrix-id":"src/components/ColorPicker.tsx:81:8","data-matrix-name":"div","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"81","data-component-file":"ColorPicker.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20mb-3%22%7D",children:[t.jsx(St,{className:"w-4 h-4 text-primary-500","data-matrix-id":"src/components/ColorPicker.tsx:82:10","data-matrix-name":"Palette","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"82","data-component-file":"ColorPicker.tsx","data-component-name":"Palette","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20text-primary-500%22%7D"}),t.jsx("span",{className:"text-sm font-medium text-neutral-700","data-matrix-id":"src/components/ColorPicker.tsx:83:10","data-matrix-name":"span","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"83","data-component-file":"ColorPicker.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-sm%20font-medium%20text-neutral-700%22%7D",children:"预设颜色"})]}),t.jsx("div",{className:"grid grid-cols-3 gap-3","data-matrix-id":"src/components/ColorPicker.tsx:86:8","data-matrix-name":"div","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"86","data-component-file":"ColorPicker.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22grid%20grid-cols-3%20gap-3%22%7D",children:xt.map(b=>t.jsxs("button",{onClick:()=>n(b.value),className:`
                relative p-4 rounded-lg border-2 transition-all duration-200 hover:scale-105 hover:shadow-md
                ${a===b.value?"border-primary-500 ring-2 ring-primary-200":"border-neutral-200 hover:border-neutral-300"}
              `,title:b.name,"data-matrix-id":"src/components/ColorPicker.tsx:88:12","data-matrix-name":"button","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"88","data-component-file":"ColorPicker.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%2C%22title%22%3A%22%5BMemberExpression%5D%22%7D",children:[t.jsxs("div",{className:"flex flex-col items-center gap-2","data-matrix-id":"src/components/ColorPicker.tsx:99:14","data-matrix-name":"div","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"99","data-component-file":"ColorPicker.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20flex-col%20items-center%20gap-2%22%7D",children:[t.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:b.hex},"data-matrix-id":"src/components/ColorPicker.tsx:100:16","data-matrix-name":"div","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"100","data-component-file":"ColorPicker.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20rounded-full%20border-2%20border-white%20shadow-sm%22%2C%22style%22%3A%7B%22backgroundColor%22%3A%22%5BMemberExpression%5D%22%7D%7D"}),t.jsx("span",{className:"text-xs font-medium text-neutral-700","data-matrix-id":"src/components/ColorPicker.tsx:104:16","data-matrix-name":"span","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"104","data-component-file":"ColorPicker.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-xs%20font-medium%20text-neutral-700%22%7D",children:b.name})]}),a===b.value&&t.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-primary-500 rounded-full flex items-center justify-center","data-matrix-id":"src/components/ColorPicker.tsx:107:16","data-matrix-name":"div","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"107","data-component-file":"ColorPicker.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20-top-1%20-right-1%20w-5%20h-5%20bg-primary-500%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:t.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20","data-matrix-id":"src/components/ColorPicker.tsx:108:18","data-matrix-name":"svg","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"108","data-component-file":"ColorPicker.tsx","data-component-name":"svg","data-component-content":"%7B%22className%22%3A%22w-3%20h-3%20text-white%22%2C%22fill%22%3A%22currentColor%22%2C%22viewBox%22%3A%220%200%2020%2020%22%7D",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},b.value))})]}),o&&a&&t.jsxs("button",{onClick:o,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 rounded-lg transition-colors","data-matrix-id":"src/components/ColorPicker.tsx:123:8","data-matrix-name":"button","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"123","data-component-file":"ColorPicker.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-full%20flex%20items-center%20justify-center%20gap-2%20px-4%20py-2%20bg-neutral-100%20hover%3Abg-neutral-200%20text-neutral-700%20rounded-lg%20transition-colors%22%7D",children:[t.jsx(Ea,{className:"w-4 h-4","data-matrix-id":"src/components/ColorPicker.tsx:127:10","data-matrix-name":"RotateCcw","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"127","data-component-file":"ColorPicker.tsx","data-component-name":"RotateCcw","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),"恢复默认颜色"]}),t.jsx("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200","data-matrix-id":"src/components/ColorPicker.tsx:132:6","data-matrix-name":"div","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"132","data-component-file":"ColorPicker.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-blue-50%20rounded-lg%20p-3%20border%20border-blue-200%22%7D",children:t.jsx("p",{className:"text-sm text-blue-800","data-matrix-id":"src/components/ColorPicker.tsx:133:8","data-matrix-name":"p","data-component-path":"src/components/ColorPicker.tsx","data-component-line":"133","data-component-file":"ColorPicker.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-blue-800%22%7D",children:"💡 提示：选择预设或自定义颜色后立即生效。地图填充和卡片会一起更新。"})})]})}function se({isOpen:a,onClose:n,onColorChanged:o,regions:f}){var E;const[c,g]=s.useState(null),[B,C]=s.useState({}),[b,j]=s.useState(jt());s.useEffect(()=>{if(a){C($a());const p=jt();j(p)}},[a]);const $=p=>{c&&(Fa(c,p),C(k=>({...k,[c]:p})),o==null||o())},R=()=>{c&&(_a(c),C(p=>{const k={...p};return delete k[c],k}),o==null||o())},V=p=>B[p]||Et(p),Q=p=>Nt(p).hex;return a?t.jsx("div",{className:"modal-overlay",onClick:n,"data-matrix-id":"src/components/RegionColorManager.tsx:69:4","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"69","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22modal-overlay%22%2C%22onClick%22%3A%22%5BIdentifier%5D%22%7D",children:t.jsxs("div",{className:"modal-content max-w-4xl w-full mx-4 max-h-[90vh] flex flex-col",onClick:p=>p.stopPropagation(),"data-matrix-id":"src/components/RegionColorManager.tsx:70:6","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"70","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22modal-content%20max-w-4xl%20w-full%20mx-4%20max-h-%5B90vh%5D%20flex%20flex-col%22%2C%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%7D",children:[t.jsxs("div",{className:"flex items-center justify-between pb-6 border-b border-neutral-200","data-matrix-id":"src/components/RegionColorManager.tsx:74:8","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"74","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20pb-6%20border-b%20border-neutral-200%22%7D",children:[t.jsxs("div",{className:"flex items-center gap-3","data-matrix-id":"src/components/RegionColorManager.tsx:75:10","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"75","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%22%7D",children:[t.jsx(St,{className:"w-6 h-6 text-primary-500","data-matrix-id":"src/components/RegionColorManager.tsx:76:12","data-matrix-name":"Palette","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"76","data-component-file":"RegionColorManager.tsx","data-component-name":"Palette","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20text-primary-500%22%7D"}),t.jsx("h2",{className:"text-h2 font-semibold text-neutral-900","data-matrix-id":"src/components/RegionColorManager.tsx:77:12","data-matrix-name":"h2","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"77","data-component-file":"RegionColorManager.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-h2%20font-semibold%20text-neutral-900%22%7D",children:"颜色管理"})]}),t.jsx("button",{onClick:n,className:"btn-icon","data-matrix-id":"src/components/RegionColorManager.tsx:79:10","data-matrix-name":"button","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"79","data-component-file":"RegionColorManager.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22btn-icon%22%7D",children:t.jsx(Rt,{className:"w-5 h-5","data-matrix-id":"src/components/RegionColorManager.tsx:80:12","data-matrix-name":"X","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"80","data-component-file":"RegionColorManager.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})})]}),t.jsxs("div",{className:"mt-6 flex-1 overflow-y-auto pr-2","data-matrix-id":"src/components/RegionColorManager.tsx:84:8","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"84","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-6%20flex-1%20overflow-y-auto%20pr-2%22%7D",children:[t.jsxs("div",{className:"flex gap-6 min-h-[360px]","data-matrix-id":"src/components/RegionColorManager.tsx:85:10","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"85","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-6%20min-h-%5B360px%5D%22%7D",children:[t.jsxs("div",{className:"flex-1 overflow-y-auto","data-matrix-id":"src/components/RegionColorManager.tsx:86:12","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"86","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20overflow-y-auto%22%7D",children:[t.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 mb-4 flex items-center gap-2","data-matrix-id":"src/components/RegionColorManager.tsx:87:14","data-matrix-name":"h3","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"87","data-component-file":"RegionColorManager.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-lg%20font-semibold%20text-neutral-900%20mb-4%20flex%20items-center%20gap-2%22%7D",children:[t.jsx(ja,{className:"w-5 h-5","data-matrix-id":"src/components/RegionColorManager.tsx:88:16","data-matrix-name":"MapPin","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"88","data-component-file":"RegionColorManager.tsx","data-component-name":"MapPin","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"选择省份"]}),t.jsx("div",{className:"space-y-2","data-matrix-id":"src/components/RegionColorManager.tsx:92:12","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"92","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-2%22%7D",children:f.map(p=>{const k=V(p.id),z=B[p.id]!==void 0;return t.jsxs("button",{onClick:()=>g(p.id),className:`
                      w-full flex items-center gap-3 p-3 rounded-lg border-2 transition-all
                      ${c===p.id?"border-primary-500 bg-primary-50":"border-neutral-200 hover:border-neutral-300 hover:bg-neutral-50"}
                    `,"data-matrix-id":"src/components/RegionColorManager.tsx:97:18","data-matrix-name":"button","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"97","data-component-file":"RegionColorManager.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[t.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-white shadow-sm flex-shrink-0",style:{backgroundColor:Q(k)},"data-matrix-id":"src/components/RegionColorManager.tsx:107:20","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"107","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20rounded-full%20border-2%20border-white%20shadow-sm%20flex-shrink-0%22%2C%22style%22%3A%7B%22backgroundColor%22%3A%22%5BCallExpression%5D%22%7D%7D"}),t.jsxs("div",{className:"flex-1 text-left","data-matrix-id":"src/components/RegionColorManager.tsx:111:20","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"111","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20text-left%22%7D",children:[t.jsx("div",{className:"font-medium text-neutral-900","data-matrix-id":"src/components/RegionColorManager.tsx:112:22","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"112","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22font-medium%20text-neutral-900%22%7D",children:p.name}),t.jsx("div",{className:"text-sm text-neutral-500","data-matrix-id":"src/components/RegionColorManager.tsx:113:22","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"113","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-sm%20text-neutral-500%22%7D",children:p.country==="china"?"🇨🇳 中国":"🇺🇸 美国"})]}),t.jsx("div",{className:"text-right text-xs text-neutral-500","data-matrix-id":"src/components/RegionColorManager.tsx:117:20","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"117","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-right%20text-xs%20text-neutral-500%22%7D",children:z?"已自定义":"默认"})]},p.id)})})]}),t.jsx("div",{className:"w-80 border-l border-neutral-200 pl-6 h-full overflow-y-auto","data-matrix-id":"src/components/RegionColorManager.tsx:126:12","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"126","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-80%20border-l%20border-neutral-200%20pl-6%20h-full%20overflow-y-auto%22%7D",children:c?t.jsx(oe,{currentColor:V(c),onColorSelect:$,onReset:B[c]?R:void 0,regionName:(E=f.find(p=>p.id===c))==null?void 0:E.name,"data-matrix-id":"src/components/RegionColorManager.tsx:128:16","data-matrix-name":"ColorPicker","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"128","data-component-file":"RegionColorManager.tsx","data-component-name":"ColorPicker","data-component-content":"%7B%22currentColor%22%3A%22%5BCallExpression%5D%22%2C%22onColorSelect%22%3A%22%5BIdentifier%5D%22%2C%22onReset%22%3A%22%5BConditionalExpression%5D%22%2C%22regionName%22%3A%22%5BOptionalMemberExpression%5D%22%7D"}):t.jsx("div",{className:"flex items-center justify-center h-full text-neutral-500","data-matrix-id":"src/components/RegionColorManager.tsx:135:16","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"135","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20h-full%20text-neutral-500%22%7D",children:t.jsxs("div",{className:"text-center","data-matrix-id":"src/components/RegionColorManager.tsx:136:18","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"136","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%22%7D",children:[t.jsx(St,{className:"w-12 h-12 mx-auto mb-3 text-neutral-300","data-matrix-id":"src/components/RegionColorManager.tsx:137:20","data-matrix-name":"Palette","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"137","data-component-file":"RegionColorManager.tsx","data-component-name":"Palette","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20mx-auto%20mb-3%20text-neutral-300%22%7D"}),t.jsx("p",{"data-matrix-id":"src/components/RegionColorManager.tsx:138:20","data-matrix-name":"p","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"138","data-component-file":"RegionColorManager.tsx","data-component-name":"p",children:"请选择左侧省份"}),t.jsx("p",{className:"text-sm","data-matrix-id":"src/components/RegionColorManager.tsx:139:20","data-matrix-name":"p","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"139","data-component-file":"RegionColorManager.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%22%7D",children:"来设置自定义颜色"})]})})})]}),t.jsxs("div",{className:"mt-6 grid gap-4 md:grid-cols-2","data-matrix-id":"src/components/RegionColorManager.tsx:146:10","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"146","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-6%20grid%20gap-4%20md%3Agrid-cols-2%22%7D",children:[t.jsxs("div",{className:"bg-white rounded-lg border border-neutral-200 p-4","data-matrix-id":"src/components/RegionColorManager.tsx:147:12","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"147","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20rounded-lg%20border%20border-neutral-200%20p-4%22%7D",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3","data-matrix-id":"src/components/RegionColorManager.tsx:148:14","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"148","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20mb-3%22%7D",children:[t.jsx(Ra,{className:"w-4 h-4 text-primary-500","data-matrix-id":"src/components/RegionColorManager.tsx:149:16","data-matrix-name":"SlidersHorizontal","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"149","data-component-file":"RegionColorManager.tsx","data-component-name":"SlidersHorizontal","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20text-primary-500%22%7D"}),t.jsx("h4",{className:"font-medium text-neutral-900","data-matrix-id":"src/components/RegionColorManager.tsx:150:16","data-matrix-name":"h4","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"150","data-component-file":"RegionColorManager.tsx","data-component-name":"h4","data-component-content":"%7B%22className%22%3A%22font-medium%20text-neutral-900%22%7D",children:"基础地图颜色"})]}),t.jsxs("div",{className:"space-y-4","data-matrix-id":"src/components/RegionColorManager.tsx:152:14","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"152","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:[t.jsxs("label",{className:"flex items-center justify-between gap-2 text-sm","data-matrix-id":"src/components/RegionColorManager.tsx:153:16","data-matrix-name":"label","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"153","data-component-file":"RegionColorManager.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20gap-2%20text-sm%22%7D",children:[t.jsx("span",{className:"text-neutral-600","data-matrix-id":"src/components/RegionColorManager.tsx:154:18","data-matrix-name":"span","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"154","data-component-file":"RegionColorManager.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-neutral-600%22%7D",children:"无同学地区填充色"}),t.jsx("input",{type:"color",value:b.emptyRegionColor,onChange:p=>{const k=oa({emptyRegionColor:p.target.value});j(k),o==null||o()},className:"w-12 h-8 rounded border border-neutral-200 cursor-pointer","data-matrix-id":"src/components/RegionColorManager.tsx:155:18","data-matrix-name":"input","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"155","data-component-file":"RegionColorManager.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22color%22%2C%22value%22%3A%22%5BMemberExpression%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-12%20h-8%20rounded%20border%20border-neutral-200%20cursor-pointer%22%7D"})]}),t.jsxs("label",{className:"flex items-center justify-between gap-2 text-sm","data-matrix-id":"src/components/RegionColorManager.tsx:166:16","data-matrix-name":"label","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"166","data-component-file":"RegionColorManager.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20gap-2%20text-sm%22%7D",children:[t.jsx("span",{className:"text-neutral-600","data-matrix-id":"src/components/RegionColorManager.tsx:167:18","data-matrix-name":"span","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"167","data-component-file":"RegionColorManager.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-neutral-600%22%7D",children:"画布背景色"}),t.jsx("input",{type:"color",value:b.canvasBackgroundColor,onChange:p=>{const k=oa({canvasBackgroundColor:p.target.value});j(k),o==null||o()},className:"w-12 h-8 rounded border border-neutral-200 cursor-pointer","data-matrix-id":"src/components/RegionColorManager.tsx:168:18","data-matrix-name":"input","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"168","data-component-file":"RegionColorManager.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22color%22%2C%22value%22%3A%22%5BMemberExpression%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-12%20h-8%20rounded%20border%20border-neutral-200%20cursor-pointer%22%7D"})]})]})]}),t.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200","data-matrix-id":"src/components/RegionColorManager.tsx:182:12","data-matrix-name":"div","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"182","data-component-file":"RegionColorManager.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-amber-50%20rounded-lg%20p-4%20border%20border-amber-200%22%7D",children:[t.jsx("h4",{className:"font-medium text-amber-900 mb-2","data-matrix-id":"src/components/RegionColorManager.tsx:183:14","data-matrix-name":"h4","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"183","data-component-file":"RegionColorManager.tsx","data-component-name":"h4","data-component-content":"%7B%22className%22%3A%22font-medium%20text-amber-900%20mb-2%22%7D",children:"💡 使用说明"}),t.jsxs("ul",{className:"text-sm text-amber-800 space-y-1","data-matrix-id":"src/components/RegionColorManager.tsx:184:14","data-matrix-name":"ul","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"184","data-component-file":"RegionColorManager.tsx","data-component-name":"ul","data-component-content":"%7B%22className%22%3A%22text-sm%20text-amber-800%20space-y-1%22%7D",children:[t.jsx("li",{"data-matrix-id":"src/components/RegionColorManager.tsx:185:16","data-matrix-name":"li","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"185","data-component-file":"RegionColorManager.tsx","data-component-name":"li",children:"• 仅显示当前地图中有同学的省份/州"}),t.jsx("li",{"data-matrix-id":"src/components/RegionColorManager.tsx:186:16","data-matrix-name":"li","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"186","data-component-file":"RegionColorManager.tsx","data-component-name":"li",children:"• 点击“当前颜色”或预设色块即可实时应用"}),t.jsx("li",{"data-matrix-id":"src/components/RegionColorManager.tsx:187:16","data-matrix-name":"li","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"187","data-component-file":"RegionColorManager.tsx","data-component-name":"li",children:"• 下方输入框可直接调整基础地图填充与背景色"}),t.jsx("li",{"data-matrix-id":"src/components/RegionColorManager.tsx:188:16","data-matrix-name":"li","data-component-path":"src/components/RegionColorManager.tsx","data-component-line":"188","data-component-file":"RegionColorManager.tsx","data-component-name":"li",children:"• 所有设置都会保存在本地，刷新后依然生效"})]})]})]})]})]})}):null}function re(){const[a,n]=s.useState("china"),[o,f]=s.useState([]),[c,g]=s.useState(null),[B,C]=s.useState(!0),[b,j]=s.useState(!1),[$,R]=s.useState(!1),[V,Q]=s.useState(!1),[E,p]=s.useState(!1),[k,z]=s.useState(null),[W,J]=s.useState(null),[Y,ut]=s.useState([]),[P,nt]=s.useState(0);s.useEffect(()=>{fetch("/data/maps-config.json").then(M=>M.json()).then(M=>{g(M),C(!1)}).catch(M=>{console.error("Failed to load map configuration:",M),C(!1)})},[]),s.useEffect(()=>{it()},[]);const it=()=>{const M=Yt();f(M)},rt=M=>{z(M),J(null),j(!0)},K=M=>{const L=lt().find(vt=>vt.id===M.region_id);L&&(z(L),J(M),j(!0))},yt=async M=>{try{W?Ha(W.id,M):Ya({country:M.country,region_id:M.region_id,region_name:M.region_name,name:M.name,city:M.city,color:M.color}),it(),j(!1)}catch(L){throw console.error("Failed to save student:",L),L}},ht=async M=>{try{if(!Xa(M)){console.error("Delete failed: student not found"),alert("删除失败，请重试");return}it()}catch(L){console.error("Failed to delete student:",L),alert("删除失败，请重试")}},mt=(M,L)=>{z(M),ut(L),R(!0)},tt=()=>{nt(M=>M+1),it()},lt=()=>c?c.countries[a].administrative_divisions:[],ot=()=>o.filter(M=>M.country===a),wt=()=>new Set(ot().map(L=>L.region_id)).size;if(B)return t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-surface-base","data-matrix-id":"src/App.tsx:138:6","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"138","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20min-h-screen%20bg-surface-base%22%7D",children:t.jsxs("div",{className:"text-center","data-matrix-id":"src/App.tsx:139:8","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"139","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%22%7D",children:[t.jsx("div",{className:"inline-block w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin","data-matrix-id":"src/App.tsx:140:10","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"140","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22inline-block%20w-12%20h-12%20border-4%20border-primary-500%20border-t-transparent%20rounded-full%20animate-spin%22%7D"}),t.jsx("p",{className:"mt-4 text-body text-neutral-700","data-matrix-id":"src/App.tsx:141:10","data-matrix-name":"p","data-component-path":"src/App.tsx","data-component-line":"141","data-component-file":"App.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22mt-4%20text-body%20text-neutral-700%22%7D",children:"加载中..."})]})});const gt=c?c.countries[a].administrative_divisions.filter(M=>o.some(L=>L.country===a&&L.region_id===M.id)).map(M=>({...M,country:a})):[];return t.jsxs("div",{className:"min-h-screen bg-surface-base","data-matrix-id":"src/App.tsx:156:4","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"156","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-surface-base%22%7D",children:[t.jsx(qa,{selectedCountry:a,onCountryChange:n,studentCount:ot().length,onExport:()=>Q(!0),onColorManager:()=>p(!0),"data-matrix-id":"src/App.tsx:158:6","data-matrix-name":"Navigation","data-component-path":"src/App.tsx","data-component-line":"158","data-component-file":"App.tsx","data-component-name":"Navigation","data-component-content":"%7B%22selectedCountry%22%3A%22%5BIdentifier%5D%22%2C%22onCountryChange%22%3A%22%5BIdentifier%5D%22%2C%22studentCount%22%3A%22%5BMemberExpression%5D%22%2C%22onExport%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onColorManager%22%3A%22%5BArrowFunctionExpression%5D%22%7D"}),t.jsx("main",{className:"pt-16 md:pt-18","data-matrix-id":"src/App.tsx:167:6","data-matrix-name":"main","data-component-path":"src/App.tsx","data-component-line":"167","data-component-file":"App.tsx","data-component-name":"main","data-component-content":"%7B%22className%22%3A%22pt-16%20md%3Apt-18%22%7D",children:t.jsx("div",{id:"map-container","data-country":a,className:"w-full",style:{height:"calc(100vh - 4rem)"},"data-matrix-id":"src/App.tsx:168:8","data-matrix-name":"div","data-component-path":"src/App.tsx","data-component-line":"168","data-component-file":"App.tsx","data-component-name":"div","data-component-content":"%7B%22id%22%3A%22map-container%22%2C%22className%22%3A%22w-full%22%2C%22style%22%3A%7B%22height%22%3A%22calc(100vh%20-%204rem)%22%7D%7D",children:!B&&c&&t.jsx(Qa,{country:a,regions:lt(),students:ot(),onRegionClick:rt,onStudentEdit:K,onStudentDelete:ht,onShowList:mt,colorChanged:P,"data-matrix-id":"src/App.tsx:175:12","data-matrix-name":"InteractiveMap","data-component-path":"src/App.tsx","data-component-line":"175","data-component-file":"App.tsx","data-component-name":"InteractiveMap","data-component-content":"%7B%22country%22%3A%22%5BIdentifier%5D%22%2C%22regions%22%3A%22%5BCallExpression%5D%22%2C%22students%22%3A%22%5BCallExpression%5D%22%2C%22onRegionClick%22%3A%22%5BIdentifier%5D%22%2C%22onStudentEdit%22%3A%22%5BIdentifier%5D%22%2C%22onStudentDelete%22%3A%22%5BIdentifier%5D%22%2C%22onShowList%22%3A%22%5BIdentifier%5D%22%2C%22colorChanged%22%3A%22%5BIdentifier%5D%22%7D"})})}),k&&t.jsxs(t.Fragment,{children:[t.jsx(te,{isOpen:b,onClose:()=>{j(!1),J(null)},onSave:yt,student:W,regionName:k.name,regionId:k.id,country:a,"data-matrix-id":"src/App.tsx:192:10","data-matrix-name":"StudentModal","data-component-path":"src/App.tsx","data-component-line":"192","data-component-file":"App.tsx","data-component-name":"StudentModal","data-component-content":"%7B%22isOpen%22%3A%22%5BIdentifier%5D%22%2C%22onClose%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onSave%22%3A%22%5BIdentifier%5D%22%2C%22student%22%3A%22%5BIdentifier%5D%22%2C%22regionName%22%3A%22%5BMemberExpression%5D%22%2C%22regionId%22%3A%22%5BMemberExpression%5D%22%2C%22country%22%3A%22%5BIdentifier%5D%22%7D"}),t.jsx(ae,{isOpen:$,onClose:()=>R(!1),students:Y,regionName:k.name,onEdit:K,onDelete:ht,onAddNew:()=>{R(!1),J(null),j(!0)},"data-matrix-id":"src/App.tsx:205:10","data-matrix-name":"StudentListModal","data-component-path":"src/App.tsx","data-component-line":"205","data-component-file":"App.tsx","data-component-name":"StudentListModal","data-component-content":"%7B%22isOpen%22%3A%22%5BIdentifier%5D%22%2C%22onClose%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22students%22%3A%22%5BIdentifier%5D%22%2C%22regionName%22%3A%22%5BMemberExpression%5D%22%2C%22onEdit%22%3A%22%5BIdentifier%5D%22%2C%22onDelete%22%3A%22%5BIdentifier%5D%22%2C%22onAddNew%22%3A%22%5BArrowFunctionExpression%5D%22%7D"})]}),t.jsx(ee,{isOpen:V,onClose:()=>Q(!1),mapElementId:"map-container",studentCount:ot().length,regionCount:wt(),mapsConfig:c,currentStudents:ot(),currentCountry:a,"data-matrix-id":"src/App.tsx:221:6","data-matrix-name":"ExportModal","data-component-path":"src/App.tsx","data-component-line":"221","data-component-file":"App.tsx","data-component-name":"ExportModal","data-component-content":"%7B%22isOpen%22%3A%22%5BIdentifier%5D%22%2C%22onClose%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22mapElementId%22%3A%22map-container%22%2C%22studentCount%22%3A%22%5BMemberExpression%5D%22%2C%22regionCount%22%3A%22%5BCallExpression%5D%22%2C%22mapsConfig%22%3A%22%5BIdentifier%5D%22%2C%22currentStudents%22%3A%22%5BCallExpression%5D%22%2C%22currentCountry%22%3A%22%5BIdentifier%5D%22%7D"}),c&&t.jsx(se,{isOpen:E,onClose:()=>p(!1),onColorChanged:tt,regions:gt,"data-matrix-id":"src/App.tsx:234:8","data-matrix-name":"RegionColorManager","data-component-path":"src/App.tsx","data-component-line":"234","data-component-file":"App.tsx","data-component-name":"RegionColorManager","data-component-content":"%7B%22isOpen%22%3A%22%5BIdentifier%5D%22%2C%22onClose%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22onColorChanged%22%3A%22%5BIdentifier%5D%22%2C%22regions%22%3A%22%5BIdentifier%5D%22%7D"})]})}ka.createRoot(document.getElementById("root")).render(t.jsx(s.StrictMode,{"data-matrix-id":"src/main.tsx:8:2","data-matrix-name":"StrictMode","data-component-path":"src/main.tsx","data-component-line":"8","data-component-file":"main.tsx","data-component-name":"StrictMode",children:t.jsx(Ia,{children:t.jsx(re,{"data-matrix-id":"src/main.tsx:10:6","data-matrix-name":"App","data-component-path":"src/main.tsx","data-component-line":"10","data-component-file":"main.tsx","data-component-name":"App"})})}));
